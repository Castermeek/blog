<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Azure Identity Support Blog</title>
  
  <subtitle>日本マイクロソフトの Azure Active Directory と AD FS に関するサポート情報のブログです。</subtitle>
  <link href="https://jpazureid.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpazureid.github.io/blog/"/>
  <updated>2021-10-30T20:56:57.583Z</updated>
  <id>https://jpazureid.github.io/blog/</id>
  
  <author>
    <name>Azure Identity Support Japan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Microsoft Authenticator による住所や支払い情報の自動入力</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/autofill-your-addresses-and-payment-info-with-microsoft/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/autofill-your-addresses-and-payment-info-with-microsoft/</id>
    <published>2021-10-30T21:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.583Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。 </p><p>本記事は、2021 年 10 月 25 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/autofill-your-addresses-and-payment-info-with-microsoft/ba-p/2464379">Autofill your addresses and payment info with Microsoft Authenticator</a> を意訳したものになります。</p><hr><p>皆さん、こんにちは。 </p><p>この度、<a href="https://aka.ms/AuthApp">Microsoft Authenticator</a> を利用した住所や支払い情報の自動入力機能が一般公開されました。 </p><p>Microsoft Authenticator によりパスワードが自動入力できるのと同じように (<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/bg-p/Identity">2021年 2 月に発表</a>)、<a href="https://go.microsoft.com/fwlink/?linkid=2144423">Microsoft アカウント</a> を使用して住所や支払い情報を自動入力できるようになりました。モバイル デバイスで自動入力データを同期していない場合は、Microsoft Authenticator を起動し、「パスワード」 タブに移動して、データの同期を開始できます。その際に、<a href="https://go.microsoft.com/fwlink/?linkid=2172589">Authenticator をデフォルトの自動入力プロバイダとして選択ください</a>。  </p><h2 id="まず-Authenticator-に住所や支払い情報を保存します"><a href="#まず-Authenticator-に住所や支払い情報を保存します" class="headerlink" title="まず Authenticator に住所や支払い情報を保存します"></a>まず Authenticator に住所や支払い情報を保存します</h2><p>Android をご利用の場合、サイトやアプリで住所や支払い情報を入力した際、Authenticator にその情報を保存することができます。デスクトップの <a href="https://www.microsoft.com/en-us/edge?r=1">Microsoft Edge</a> や <a href="https://chrome.google.com/webstore/detail/microsoft-autofill/fiedbfgcleddlbcmgdigjgdfcggjcion">Microsoft Autofill Extension for Google Chrome</a> を含むデバイス間で住所が同期され、自動的に入力されます。 </p><p><img src="/blog/azure-active-directory/autofill-your-addresses-and-payment-info-with-microsoft/Mobile-save-address.gif"></p><p><img src="/blog/azure-active-directory/autofill-your-addresses-and-payment-info-with-microsoft/Mobile-save-payment.gif"></p><h2 id="次に-Authenticator-を使用して住所や支払い情報を自動入力します"><a href="#次に-Authenticator-を使用して住所や支払い情報を自動入力します" class="headerlink" title="次に Authenticator を使用して住所や支払い情報を自動入力します"></a>次に Authenticator を使用して住所や支払い情報を自動入力します</h2><p>Android をご利用の場合、Authenticator が住所、支払い情報、保存したパスワードを候補として提案し、お気に入りのアプリやサイトで自動入力できるようになりました。</p><p><img src="/blog/azure-active-directory/autofill-your-addresses-and-payment-info-with-microsoft/Mobile-Autofill-Address.gif"> </p><p><img src="/blog/azure-active-directory/autofill-your-addresses-and-payment-info-with-microsoft/Mobile-Autofill-Payment.gif"> </p><p><strong>補足</strong>: iOS プラットフォームは全てのサードパーティに制限をかけており、自動入力プロバイダーおよびパスワード マネージャーが自動入力できるのはパスワードのみです。その他 (住所など) のデータは自動入力されません。このため、Microsoft Authenticator（およびその他サードパーティの自動入力プロバイダー) を iOS 上で利用した場合、 上記の Android のような機能をご利用できません。iOS では、 Authenticator を使って住所を同期することのみ可能です。同期された住所は、iOS デバイス上でアクセスするアプリやサイトに Authenticator からコピーすることができます。</p><p>デスクトップ端末で Google Chrome をお使いの場合、Google Chrome ウェブ ストアで提供されている <a href="https://go.microsoft.com/fwlink/?linkid=2174025">Microsoft Autofill Extension</a> を使って、住所や支払い情報を自動入力することができます。</p><p>すべての自動入力データは、デバイスとクラウドの両方で暗号化されています。さらに、Authenticator を使用して支払い情報を自動入力する際には、生体認証が必要になります。</p><p>自動入力は、個人の <a href="https://go.microsoft.com/fwlink/?linkid=2144423">Microsoft アカウント</a> を使用してデータを同期します。職場や学校のアカウント (Azure Active Directory アカウントなど) とは同期しません。Microsoft Authenticator に [パスワード]、[支払い]、[住所] タブが表示されない場合、お客様の組織が個人の Microsoft アカウントを使用した自動入力を無効にしている可能性があります。詳細は <a href="https://go.microsoft.com/fwlink/?linkid=2172589">こちら</a>をご覧ください。</p><p><img src="/blog/azure-active-directory/autofill-your-addresses-and-payment-info-with-microsoft/Address-Payment-switch.gif"> </p><p>皆様のご意見、ご感想をお待ちしております。</p><p>Alex Simons (<a href="https://twitter.com/Alex_A_Simons">@Alex_A_Simons</a>)<br>Corporate VP of Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。 &lt;/p&gt;
&lt;p&gt;本記事は、2021 年 10 月 25 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://tech</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft が IDC MarketScape により世界的かつ先進的な認証のリーダーとして認められました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/recognized-by-idc-marketscape-as-a-leader/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/recognized-by-idc-marketscape-as-a-leader/</id>
    <published>2021-10-21T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.835Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの中井です。</p><p>本記事は、2021 年 10 月 7 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/microsoft-recognized-by-the-idc-marketscape-as-a-leader-in/ba-p/2464411">Microsoft recognized by the IDC MarketScape as a Leader in Worldwide Advanced Authentication for AAD</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><p>なお、IDC のレポートからの抜粋部分については、IDC より許可を得て翻訳しました。</p><hr><p>Microsoft は、IDC MarketScape：Worldwide Advanced Authentication for Identity Security 2021 Vendor Assessment (doc #US46178720、2021 年 7 月) レポートにて、リーダー (先進的なベンダー) として選出されました。</p><p>IDC MarketScape では、企業の ID セキュリティ機能と戦略を分析しており、Microsoft はリーダーとして認められた 7 社のうちの 1 社と認定されました。詳細は <a href="https://idcdocserv.com/US46178720e_Microsoft">レポートの抜粋</a> をご覧ください。</p><p><img src="/blog/azure-active-directory/recognized-by-idc-marketscape-as-a-leader/image1.png"></p><p>注意: 図や付随する言語を加工、編集することは禁止されています。本文書を他の言語に翻訳する場合や、本文書を第三者に提供 (再頒布) する場合は、別途 IDC との契約が必要です。</p><p>IDC MarketScape のベンダー分析モデルは、特定の市場において ICT サプライヤーが他社と比較してどれほど市場に適切に対応しているか概要を提供することを目的としています。調査方法は、質的基準と量的基準の両方に基づいた厳密な採点手法を採用しており、その結果を特定の市場における各ベンダーのポジションとして 1 つのグラフで表しています。Capabilities (縦軸) のスコアは、ベンダーの製品、市場投入、短期的なビジネスの実行力を評価しています。Strategy (横軸) スコアは、3 ～ 5 年のタイムフレームでのベンターの戦略と顧客要求との整合性を評価しています。ベンダーの市場シェアは、円の大きさで表されています。</p><p>出典: “IDC MarketScape: Worldwide Advanced Authentication for Identity Security 2021 Vendor Assessment”, By: Jay Bretzmann、2021 年 7 月、IDC # US46178720</p><p>レポートの中で、サイバー  セキュリティ リサーチのプログラムディレクターであるジェイ・ブレッツマン氏は次のように述べています: “Microsoft Active Directory と Microsoft Azure Active Directory は、他の全ディレクトリ サービス プロバイダーを合わせたものよりも大きな ID ストアになっています。Microsoft の ID エコシステムは拡大を続けており、Windows 環境だけでなく非 Windows 環境においてもほとんどのユースケースに対応できる高度な認証機能を提供しています”。レポートではさらに、Azure Active Directory の Identity Protection、条件付きアクセス、継続的なアクセス評価、検証可能な資格情報 (verifiable credentials) の機能もハイライトとして挙げています。</p><p>Microsoft は、ID に基づくセキュリティに最優先で取り組んでいます。そのため、当社の取り組みが IDC MarketScape で評価されたことを非常に光栄に思います。私たちは、製品の開発や新しいソリューションの革新を行う際に、セキュリティの原則を重要視しています。IDC MarketScape で評価されたことは、お客様に ID に基づくセキュリティと快適なユーザー体験を提供するという当社のビジョンを証明するものだと考えています。</p><p>IDC MarketScape のガイダンスは、以下のように Microsoft のセキュリティ原則とも一致しています。</p><ul><li><strong>多要素認証 (MFA) の有効化</strong>: レポートでは次のように述べられています: “IDC では、IT の調達側は、今年のセキュリティ ソフトウェア予算に MFA ソリューションを含めるべきと考えています。これは必ず実施すべきセキュリティの対応です。MFA は事実上 SaaS として提供されており、企業や組織にとって利用が推奨されるセキュリティ対策です”。</li><li><strong>パスワードレス化</strong>: レポートでは以下のように述べられています: “2021 年もしくは恐らく 2022 年以降になるかも知れませんが、パスワードレスのソリューションが、利用形態により広くユーザーに活用されるようになる日はそう遠くはありません。テクノロジーの調達者として、パスワードレスの導入は先延ばしにすべきでしょうか？IDC としてはそれは推奨しません。現在のパスワードレスの恩恵はデメリットを上回るものだからです。企業がパスワードのない未来を見据えることを願っています。”</li><li><strong>条件付きアクセス ポリシーの利用</strong>: IT 部門は、ユーザーがあるリソースにアクセスするために特定の条件を満たすことを要求する if-then ステートメントを設定することができます。</li><li><strong>Identity Protection の適用</strong>: 継続的なアクセス評価では、アカウントの無効化やパスワードのリセット、管理者によるユーザーの失効などの変更があった場合に、Exchange や Microsoft Teams へのアクティブなユーザー セッションをリアルタイムに終了させることが可能です。</li></ul><p>本レポートではまた、業界の動向やセキュリティ侵害の主な原因を調査し、セキュリティ ソリューションの選定に関する推奨事項を提案しています。</p><p>詳細につきましては、<a href="https://idcdocserv.com/US46178720e_Microsoft">レポートの抜粋</a> をご覧ください。</p><p>IDC MarketScape のベンダー評価に Microsoft が選ばれたことは、企業のセキュリティを高めるための直近の取り組みが業界で評価された最も新しい例といえます。より詳細については Microsoft のセキュリティに対する <a href="https://www.microsoft.com/ja-jp/security/business/security-leaders-gartner-magic-quadrant">先進的な取り組みの評価</a> をご覧ください。</p><p>また、Azure AD でセキュリティ対策を強化するためにできることについては、<a href="https://docs.microsoft.com/ja-jp/azure/security/fundamentals/steps-secure-identity">ID 基盤をセキュリティ保護する 5 つのステップ</a> をご覧ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの中井です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 10 月 7 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcomm</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure コマンド ライン ツールにおける Azure AD Graph から Microsoft Graph への移行について</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/migrate-aadgraph-to-msgraph/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/migrate-aadgraph-to-msgraph/</id>
    <published>2021-10-20T18:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.787Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの栗井です。</p><p>本記事は、2021 年 10 月 12 日に米国の Azure Tools Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-tools/azure-ad-to-microsoft-graph-migration-for-azure-command-line/ba-p/2836666">Azure AD to Microsoft Graph migration for Azure command line tools.</a><br> を意訳したものになります。</p><hr><p>先日アナウンスされた <a href="https://azure.microsoft.com/en-us/updates/update-your-apps-to-use-microsoft-graph-before-30-june-2022/">Azure AD Graph の廃止</a> に伴い、現在 Azure AD Graph を利用しているすべてのアプリケーションは、Microsoft Graph (Azure AD Graph の既存の機能と新しい機能を含みます) への切り替え対応が必要となります。この変更は各種 Azure コマンド ライン ツール (Azure CLI、Azure PowerShell、Terraform) にも当てはまります。現在弊社では、各種ツールが Microsoft Graph を利用するように切り替えの作業を進行中であり、皆様がお手持ちのコードを更新できるようなるべく早く公開するよう取り組んでいます。</p><blockquote><p>[!NOTE]<br>本記事内に登場する “Azure PowerShell” は、類似呼称の “Azure AD PowerShell” とは異なる、Azure リソース管理用の PowerShell モジュールです。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/powershell/azure/">Azure PowerShell 公開情報</a></li><li><a href="https://jpazureid.github.io/blog/azure-active-directory/powershell-module/">Azure AD PowerShell 関連記事</a></li></ul></blockquote><h2 id="既存のスクリプトへの影響"><a href="#既存のスクリプトへの影響" class="headerlink" title="既存のスクリプトへの影響"></a>既存のスクリプトへの影響</h2><p>原則として<strong>既存のスクリプトへの影響を最小限とする</strong>ことを目標としています。そのため、アップグレードを実施しても可能な限り同じコマンド実行結果となるようにして、利用者の追加作業が必要無いように進めています。</p><p>しかし、一部のコマンドについては Microsoft Graph API と Azure AD Graph API の動作の違いによって、変更の発生が想定されます。例えば、Microsoft Graph API を利用した場合、従来とは異なり、<a href="https://docs.microsoft.com/en-us/graph/api/application-post-applications?view=graph-rest-1.0&tabs=http">Azure AD にアプリケーションを登録</a> した際にクライアント シークレットは同時に自動作成されない動作となります。シークレット値を利用する場合は、アプリケーションの登録完了後、別途作成することが必要になります。上記例のような互換性への影響が懸念される変更点の一覧とお客様側で必要な対応については、ツールのプレビュー版と併せて情報を公開予定です。 </p><h2 id="Azure-コマンド-ライン-ツールと-Microsoft-Graph-のコマンドラインツールの比較"><a href="#Azure-コマンド-ライン-ツールと-Microsoft-Graph-のコマンドラインツールの比較" class="headerlink" title="Azure コマンド ライン ツールと Microsoft Graph のコマンドラインツールの比較"></a>Azure コマンド ライン ツールと Microsoft Graph のコマンドラインツールの比較</h2><p>Azure AD に対する操作には Azure AD PowerShell や Microsoft Graph SDK PowrShell が用意されています。このため、Azure コマンド ライン ツールでの Azure AD 関連機能は、スクリプト開発者の利便性のためよく利用される一部の機能のみが提供されており、機能は限定的となっています。</p><p>今後の Azure コマンド ツールでも、Azure AD リソースに対する機能については、部分的に継続してサポートしてまいりますが、認証など基本的な部分については新しい Graph の機能を実装する予定もございます。そこで提供されない機能は、Microsoft Graph ツール (Microsoft Graph SDK PowerShell モジュール、もしくは Microsoft Graph CLI) をご利用ください。 </p><h2 id="今後のタイムライン"><a href="#今後のタイムライン" class="headerlink" title="今後のタイムライン"></a>今後のタイムライン</h2><h3 id="2021-年-10-月"><a href="#2021-年-10-月" class="headerlink" title="2021 年 10 月"></a>2021 年 10 月</h3><ul><li>MSAL を使用した Azure CLI のパブリック プレビュー (※ MS Graph への移行にあたって必要なため)。</li><li>Microsoft Graph API を使用した Azure PowerShell のパブリック プレビュー</li></ul><p>※ 各ツールのドキュメントが公開された際には、プレビューをインストールしてテストする方法についてのガイダンスが記載される予定です。</p><h3 id="2021-年-12-月"><a href="#2021-年-12-月" class="headerlink" title="2021 年 12 月"></a>2021 年 12 月</h3><ul><li>Microsoft Graph API を使用した Azure PowerShell の一般提供 (GA) 開始</li><li>古いコマンドを使用した Azure サービスの関連ドキュメントおよびスクリプトの更新対応</li></ul><h3 id="2022-年-1-月"><a href="#2022-年-1-月" class="headerlink" title="2022 年 1 月"></a>2022 年 1 月</h3><ul><li>Microsoft Graph API を使用した Azure CLI のプレビュー</li></ul><h3 id="2022-年-Q1-1-月-3-月-中"><a href="#2022-年-Q1-1-月-3-月-中" class="headerlink" title="2022 年 Q1 (1 月 - 3 月) 中"></a>2022 年 Q1 (1 月 - 3 月) 中</h3><ul><li>Microsoft Graph API を使用した Azure CLI の 一般提供 (GA) 開始</li></ul><p>Terraform については、HashiCorp 社が Azure AD プロバイダ v2 で Microsoft Graph への移行をすでに完了しています。詳細については <a href="https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/guides/microsoft-graph">AzureAD v2.0 and Microsoft Graph (terraform.io) ※外部リンク</a> をご覧ください。ご質問がある場合は、Azure CLI (<a href="https://twitter.com/azurecli">@azurecli</a>) もしくは Azure PowerShell (<a href="https://twitter.com/azureposh">@azureposh</a>) までご連絡ください。</p><h2 id="参考情報など"><a href="#参考情報など" class="headerlink" title="参考情報など"></a>参考情報など</h2><p>Azure 各種製品の公式ドキュメントが更新されるまで、Microsoft Graph への移行に関する追加ガイダンスとして、以下のリソースをご参照いただけますと幸いです。</p><p>MSAL への移行に関する追加情報と Microsoft Graph への移行における重要性:</p><ul><li><a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/update-your-applications-to-use-microsoft-authentication-library/ba-p/1257363">Update your applications to use Microsoft Authentication Library and Microsoft Graph API (英語記事)</a></li><li><a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/have-you-updated-your-applications-to-use-the-microsoft/ba-p/1144698">Have you updated your applications to use the Microsoft Authentication Library and Microsoft Graph? (英語記事)</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/msal-migration">MSAL への移行に関する概要</a></li><li><a href="https://docs.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-planning-checklist?view=graph-rest-1.0">アプリの移行計画チェックリスト (機械翻訳)</a></li></ul><p>Terraform における本変更への対応についての詳細情報 (※外部リンク):</p><ul><li><a href="https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/guides/microsoft-graph">Terraform AzureAD provider v2 is now using Microsoft Graph</a></li></ul><p>問題を発見した際には、各製品の Github リポジトリにて Issue をオープンいただけますと幸いです。</p><ul><li>Azure CLI: <a href="https://github.com/Azure/azure-cli/issues">https://github.com/Azure/azure-cli/issues</a></li><li>Azure PowerShell: <a href="https://github.com/Azure/azure-powershell/issues">https://github.com/Azure/azure-powershell/issues</a></li><li>Terraform: <a href="https://github.com/hashicorp/terraform-provider-azuread/issues">https://github.com/hashicorp/terraform-provider-azuread/issues</a> </li></ul><p>不明点がありましたら、サポート チームまでお知らせいただければ幸いです。</p><p>Damien<br>on behalf of the Azure CLIs tools team</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの栗井です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 10 月 12 日に米国の Azure Tools Blog で公開された &lt;a href=&quot;https://techcommunity.microsoft.com</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
  </entry>
  
  <entry>
    <title>Values of identifierUris property must use a verified domain of the organization or its subdomain エラーの対処法</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/aad-changes-impacting-azurecli-azureps/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/aad-changes-impacting-azurecli-azureps/</id>
    <published>2021-10-20T01:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.555Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの栗井です。</p><p>本記事は、2021 年 10 月 14 日に米国の Azure Tools Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-tools/azure-active-directory-breaking-change-impacting-azure-cli-and/ba-p/2848388">Azure Active Directory breaking change impacting Azure CLI and Azure PowerShell</a> を意訳したものになります。</p><hr><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>2021 年 10 月 15 日より、Azure AD に登録されるシングルテナントアプリケーションの AppId URI (identifierUris) には、デフォルトのスキーム (api://{appId}) または検証済みドメインのいずれかが要求されるようになります。</p><ul><li>参考情報 (英語) : <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/reference-breaking-changes#appid-uri-in-single-tenant-applications-will-require-use-of-default-scheme-or-verified-domains">Upcoming changes - October 2021 - AppId Uri in single tenant applications will require use of default scheme or verified domains</a><br>※ 日本語版の公開情報 (ja-jp) では、本変更に関する記述が未記載です (2021/10/20 時点)。英語の原文 (en-us) をご確認いただけますと幸いです。<br>実際にサポートされるアプリケーション ID の URI を、公開情報より抜粋します。</li></ul><blockquote><p>以下の例にある API と HTTP スキーマー ベースのアプリケーション ID の URI がサポートされます。<code>&lt;appid&gt;</code> などのプレース ホルダーの値を、公開情報に記載の説明を元に置き換えてください。</p></blockquote><blockquote><table><thead><tr><th>サポートされるアプリケーション ID の URI フォーマット</th><th>アプリケーション ID の URI の例</th></tr></thead><tbody><tr><td><code>api://&lt;appId&gt;</code></td><td><code>api://fc4d2d73-d05a-4a9b-85a8-4f2b3a5f38ed</code></td></tr><tr><td><code>api://&lt;tenantId&gt;/&lt;appId&gt;</code></td><td><code>api://a8573488-ff46-450a-b09a-6eca0c6a02dc/fc4d2d73-d05a-4a9b-85a8-4f2b3a5f38ed</code></td></tr><tr><td><code>api://&lt;tenantId&gt;/&lt;string&gt;</code></td><td><code>api://a8573488-ff46-450a-b09a-6eca0c6a02dc/api</code></td></tr><tr><td><code>api://&lt;string&gt;/&lt;appId&gt;</code></td><td><code>api://productapi/fc4d2d73-d05a-4a9b-85a8-4f2b3a5f38ed</code></td></tr><tr><td><code>https://&lt;tenantIdDomain&gt;.onmicrosoft.com/&lt;string&gt;</code></td><td><code>https://contoso.onmicrosoft.com/productsapi</code></td></tr><tr><td><code>https://&lt;verifiedCustomDomain&gt;/&lt;string&gt;</code></td><td><code>https://contoso.onmicrosoft.com/productsapi</code></td></tr><tr><td><code>https://&lt;string&gt;.&lt;verifiedCustomDomain&gt;</code></td><td><code>https://product.contoso.onmicrosoft.com</code></td></tr><tr><td><code>https://&lt;string&gt;.&lt;verifiedCustomDomain&gt;/&lt;string&gt;</code></td><td><code>https://product.onmicrosoft.com/productsapi</code></td></tr></tbody></table></blockquote><p>上記の変更の影響により、Azure CLI または Azure PowerShell を最新のバージョンにアップグレードしていない場合、サービス プリンシパルの作成時に次のようなエラーメッセージが表示されることが想定されます。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Values of identifierUris property must use a verified domain of the organization or its subdomain</span><br></pre></td></tr></table></figure><p>例 : “az ad sp create-for-rbac” コマンド実行時</p><p><img src="/blog/azure-active-directory/aad-changes-impacting-azurecli-azureps/ps.png" alt="該当画面"></p><h3 id="解決方法"><a href="#解決方法" class="headerlink" title="解決方法"></a>解決方法</h3><p>各種ツールを以下のバージョンにアップグレードください。</p><ul><li>Azure CLI : 2.25.0 以降</li><li>Azure PowerShell : 6.0.0 以降</li></ul><p>この変更による影響については、各ツールの GitHub ページからご確認いただけますと幸いです。</p><ul><li>Azure CLI: <a href="https://github.com/Azure/azure-cli/issues/19892">https://github.com/Azure/azure-cli/issues/19892</a></li><li>Azure PowerShell: <a href="https://github.com/Azure/azure-powershell/issues/16097">https://github.com/Azure/azure-powershell/issues/16097</a></li></ul><h3 id="回避策"><a href="#回避策" class="headerlink" title="回避策"></a>回避策</h3><p>自動化ツールの新バージョンへのアップグレードが実施いただけない場合は、以下の手順によってエラーを回避し、サービス プリンシパルを作成ください。</p><ol><li><p>Azure Active Directory にカスタム ドメインを登録します (未実施の場合)。</p></li><li><p>承認された形式の IdentifierUri で、アプリケーションを登録します。</p><p> 例 (<a href="https://docs.microsoft.com/ja-jp/cli/azure/ad/app?view=azure-cli-latest#az_ad_app_create">az ad app create</a> コマンド):</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">az ad app create --display-name <span class="string">&quot;myApp&quot;</span> --identifier-uris <span class="string">&quot;https://test.contoso.com&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>登録したアプリケーションを参照するサービスプリンシパルを作成します。</p><p> 例 (<a href="https://docs.microsoft.com/ja-jp/cli/azure/ad/sp?view=azure-cli-latest#az_ad_sp_create">az ad sp create</a> コマンド):</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">az ad sp create --id &lt;2.で登録したアプリの App Id&gt;</span><br></pre></td></tr></table></figure></li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>訳注: az ad sp create-for-rbac コマンド実行時に、適切なアプリケーション ID の URI を指定することでも回避可能です。</p></div><blockquote><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">az ad sp create-for-rbac --name <span class="string">&quot;https://test.&lt;verified-domain&gt;.com&quot;</span></span><br></pre></td></tr></table></figure></blockquote><hr><p>以上の内容がご参考になりましたら幸いです。ご不明点等ございましたらサポート チームまでお問い合わせください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの栗井です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 10 月 14 日に米国の Azure Tools Blog で公開された &lt;a href=&quot;https://techcommunity.microsoft.com</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Service Principal" scheme="https://jpazureid.github.io/blog/tags/Service-Principal/"/>
    
  </entry>
  
  <entry>
    <title>このデバイスを Azure Active Directory に参加させる のリンクが表示されない場合の確認点</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/aadj-link-is-not-displayed/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/aadj-link-is-not-displayed/</id>
    <published>2021-10-17T15:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.559Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。 Azure Identity サポート チームです。</p><p>こちらのブログでは、手動で Azure AD 参加を構成する際に利用する [このデバイスを Azure Active Directory に参加させる] のリンクが表示されない場合の確認点について紹介します。</p><span id="more"></span><h2 id="どんな事象？"><a href="#どんな事象？" class="headerlink" title="どんな事象？"></a>どんな事象？</h2><p>Azure AD 参加を手動で構成する場合は、Windows 10 にて [スタート] &gt; [設定] &gt; [アカウント] &gt; [職場または学校にアクセスする] の [接続] をクリックし、次の画面にて [このデバイスを Azure Active Directory に参加させる] のリンクから参加させます。</p><p><img src="/blog/azure-active-directory/aadj-link-is-not-displayed/screen1.png"></p><p>しかし、次の画像のように [このデバイスを Azure Active Directory に参加させる] のリンクが表示されない場合があります。</p><p><img src="/blog/azure-active-directory/aadj-link-is-not-displayed/screen2.png"></p><p>この事象について、本記事にて説明します。</p><h2 id="確認点"><a href="#確認点" class="headerlink" title="確認点"></a>確認点</h2><p>[このデバイスを Azure Active Directory に参加させる] のリンクが表示されないケースの確認点として、以下のようなパターンが考えられます。<br>これらの条件を満たしているか確認してください。</p><h3 id="1-Windows-に対して、管理者権限を保持していないユーザーとしてログオンしている"><a href="#1-Windows-に対して、管理者権限を保持していないユーザーとしてログオンしている" class="headerlink" title="1. Windows に対して、管理者権限を保持していないユーザーとしてログオンしている"></a>1. Windows に対して、管理者権限を保持していないユーザーとしてログオンしている</h3><ul><li>ローカルの Administrators グループに所属しておらず、端末に対して管理者権限を保持していないユーザーとして Windows にログオンしている場合、[このデバイスを Azure Active Directory に参加させる] が表示されません。</li><li>操作時に Windows にログオンしているユーザーが、ローカルの管理者権限を保持しているかご確認ください。</li></ul><h3 id="2-Azure-AD-への通信が行えない"><a href="#2-Azure-AD-への通信が行えない" class="headerlink" title="2. Azure AD への通信が行えない"></a>2. Azure AD への通信が行えない</h3><ul><li>Azure AD への通信が行えない状態の場合、[このデバイスを Azure Active Directory に参加させる] が表示されません。</li><li>「Azure AD への通信が行えない状態」とは、Azure AD の認証時に利用されるエンドポイントにインターネット経由でアクセスができない状態です。</li><li>次の公開情報  <a href="https://docs.microsoft.com/ja-jp/microsoft-365/enterprise/urls-and-ip-address-ranges?view=o365-worldwide#microsoft-365-common-and-office-online">Office 365 URL および IP アドレス範囲 - Microsoft 365 Common および Office Online</a> の項番 56, 59, 125 の宛先が Azure AD の認証に利用されるエンドポイントです。</li><li>項番 125 の宛先は厳密には Azure AD が提供するエンドポイントではございませんが、 [Azure AD が提示しうるサーバー証明書の失効確認先] のエンドポイントとなり、アクセスできるよう構成ください。</li><li>インターネットへのアクセスにプロキシを利用しているネットワーク環境の場合、クライアント端末が適切にプロキシ参照設定を行っているか、参照しているプロキシにて必要なエンドポイントへの通信をブロックしていないかに関してもご確認ください。</li></ul><h3 id="3-Windows-が-Home-エディションである"><a href="#3-Windows-が-Home-エディションである" class="headerlink" title="3. Windows が Home エディションである"></a>3. Windows が Home エディションである</h3><ul><li>もしご利用の端末が Windows Home エディションの場合、[このデバイスを Azure Active Directory に参加させる] が表示されません。</li><li>Professional もしくは Enterprise エディションをご利用ください。</li></ul><h3 id="4-Windows-に-built-in-administrator-ユーザーとしてログオンしている"><a href="#4-Windows-に-built-in-administrator-ユーザーとしてログオンしている" class="headerlink" title="4. Windows に built-in administrator ユーザーとしてログオンしている"></a>4. Windows に built-in administrator ユーザーとしてログオンしている</h3><ul><li>もし端末のローカル ユーザーである Administrator (built-in administrator) として Windows にログオンしている場合、[このデバイスを Azure Active Directory に参加させる] は表示されません。(既定ではこのユーザーは無効状態です)</li><li>運用上の都合で built-in administrator ユーザーとして Windows にログオンしている場合、別の “ローカルの管理者権限を持つ ローカル ユーザー” として Windows にログオンしてください。</li><li>次の公開情報 <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/devices/faq#----------------------pc---azure-ad-----------------------">エラー情報が表示されなかったにもかかわらず、PC を Azure AD に参加させることができなかったのはなぜですか?</a> にも案内があります。</li></ul><h3 id="5-Windows-端末がすでにオンプレミスの-AD-に参加している"><a href="#5-Windows-端末がすでにオンプレミスの-AD-に参加している" class="headerlink" title="5. Windows 端末がすでにオンプレミスの AD に参加している"></a>5. Windows 端末がすでにオンプレミスの AD に参加している</h3><ul><li>もし該当の Windows 端末が、すでにオンプレミスの AD に参加している場合、[このデバイスを Azure Active Directory に参加させる]  は表示されません。</li><li>Azure AD 参加 は Azure AD に対してのみ直接参加する機能となるため、Azure AD 参加をする際はオンプレミス AD から離脱し、ワークグループの状態で実施ください。</li><li>もし、オンプレミス AD と Azure AD の両方に対して参加されたい場合は、Hybrid Azure AD 参加の構成をご検討ください。</li><li>参考情報: <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/devices/concept-azure-ad-join-hybrid">ハイブリッド Azure AD 参加済みデバイス</a><br>, <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/devices/hybrid-azuread-join-plan">方法:Hybrid Azure Active Directory 参加の実装を計画する</a></li></ul><h2 id="補足-手動で-Azure-AD-参加を構成する手順"><a href="#補足-手動で-Azure-AD-参加を構成する手順" class="headerlink" title="補足  :  手動で Azure AD 参加を構成する手順"></a>補足  :  手動で Azure AD 参加を構成する手順</h2><p>前提となります、手動で Azure AD 参加を構成する手順は次の通りです。</p><p>Windows にて、[スタート] &gt; [設定] &gt; [アカウント] &gt; [職場または学校にアクセスする] にて [接続] をクリック。<br><img src="/blog/azure-active-directory/aadj-link-is-not-displayed/joinaad1.png"></p><p>[このデバイスを Azure Active Directory に参加させる] をクリック。<br><img src="/blog/azure-active-directory/aadj-link-is-not-displayed/joinaad2.png"></p><p>サインインが要求されますのでサインインします。<br><img src="/blog/azure-active-directory/aadj-link-is-not-displayed/joinaad3.png"></p><p>次の画面にて [参加する] をクリックすることでデバイスを Azure AD に参加させることができます。<br><img src="/blog/azure-active-directory/aadj-link-is-not-displayed/joinaad4.png"></p><p>次の画面が表示され Azure AD への参加が完了します。<br><img src="/blog/azure-active-directory/aadj-link-is-not-displayed/joinaad5.png"></p><p>このタイミングで Azure AD (Azure ポータル) 上でも該当のデバイスが Azure AD joind として登録されます。<br><img src="/blog/azure-active-directory/aadj-link-is-not-displayed/joinaad6.png"></p><p>以上の情報がご参考になれば幸いです。<br>ご不明な点がございましたら弊社サポートまでお気軽にお寄せください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは。 Azure Identity サポート チームです。&lt;/p&gt;
&lt;p&gt;こちらのブログでは、手動で Azure AD 参加を構成する際に利用する [このデバイスを Azure Active Directory に参加させる] のリンクが表示されない場合の確認点について紹介します。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Azure AD Join" scheme="https://jpazureid.github.io/blog/tags/Azure-AD-Join/"/>
    
    <category term="Troubleshooting" scheme="https://jpazureid.github.io/blog/tags/Troubleshooting/"/>
    
  </entry>
  
  <entry>
    <title>ゼロ トラスト ソリューション提供パートナーを支援する統合ガイダンスのご紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/integration-guidance-helps-partners-deliver-zero-trust-solutions/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/integration-guidance-helps-partners-deliver-zero-trust-solutions/</id>
    <published>2021-10-10T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.759Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2021 年 10 月 6 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/integration-guidance-helps-partners-deliver-zero-trust-solutions/ba-p/2810650">Integration guidance helps partners deliver Zero Trust solutions</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>優れた製品を作るにはお客様のニーズに耳を傾けることが大切です。弊社では、お客様よりゼロ トラストの導入がこれまで以上に重要であるという強い声をいただいております。2021 年の <a href="https://www.microsoft.com/security/blog/2021/07/28/zero-trust-adoption-report-how-does-your-organization-compare/">ゼロ トラスト導入レポート</a> より、セキュリティの意思決定者の 96% が、企業の成功にはゼロ トラストが不可欠であると述べており、76% の企業が少なくともゼロ トラスト戦略の導入を開始していることがわかっています。今後 2、3 年の間、ゼロ トラスト戦略はセキュリティの最優先事項であり続けると予想され、企業はそれに対する投資を増やすと考えられています。</p><p>ゼロ トラストの導入は米国政府でも加速しています。2021 年 5 月、ホワイト ハウスはゼロ トラスト アーキテクチャへの移行を含む、国のサイバー セキュリティの改善を求める <a href="https://www.whitehouse.gov/briefing-room/presidential-actions/2021/05/12/executive-order-on-improving-the-nations-cybersecurity/">大統領令</a> に署名しました。直近では、アメリカ合衆国行政管理予算局 (Office of Management and Budget) が、2024 年 までに達成すべき主要な目標として、ゼロ トラスト アーキテクチャに向けた <a href="https://www.whitehouse.gov/omb/briefing-room/2021/09/07/office-of-management-and-budget-releases-draft-federal-strategy-for-moving-the-u-s-government-towards-a-zero-trust-architecture/">連邦戦略のドラフト</a> を発表しました。マイクロソフトは <a href="https://www.microsoft.com/en-us/federal/CyberEO.aspx">大統領令の目標を達成するための顧客ガイダンスとリソース</a> を公開しています。</p><p>お客様がエンド ツー エンド (end-to-end) でゼロ トラストのセキュリティ体制を目指すなか、このような政府や業界の要請は、お客様へのサポートを強化する上でマイクロソフトとパートナーにとって大きな機会となります。マイクロソフトではお客様が最も包括的なセキュリティ ソリューションを容易に導入できるよう、独立系ソフトウェア ベンダーなどのパートナーとの連携に努めています。私たちは、お客様がゼロ トラストという目標に到達するために様々な道筋を経る必要があること、そしてすでに複数のセキュリティ ソリューションをお持ちであることを認識しています。私たちが協力し、お客様のニーズに応えることで、企業や国家をより強固に守ることができるのです。</p><p>パートナーの統合とゼロ トラストへの対応をサポートするために、ゼロ トラスト ガイダンス センターにおいて <a href="https://docs.microsoft.com/ja-jp/security/zero-trust/integrate/overview">パートナー統合ガイダンス</a> を公開しました。このガイダンスはゼロ トラストの基本概念に沿って構成されており、さまざまな製品やパートナーとの統合を支援するものです。以下にその例を示します。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/security/zero-trust/integrate/identity">貴社のソリューションを Azure Active Directory と統合</a> することで、リスク シグナルを共有し、顧客の信頼を高めると共に高度なソリューション シナリオをサポートします。</li><li><a href="https://docs.microsoft.com/ja-jp/security/zero-trust/integrate/endpoints#microsoft-endpoint-manager">Microsoft Endpoint Manager</a> API を使用して、従業員が使用しているデバイスのコンプライアンスを確保します。</li><li><a href="https://docs.microsoft.com/ja-jp/security/zero-trust/integrate/visibility-automation-orchestration">Azure Sentinel との統合</a> により、顧客がよりデジタル資産全体を俯瞰できるよう強化します。</li></ul><p>セキュリティ ソリューションにゼロ トラスト アプローチを取り入れている企業を非常に嬉しく思います。以下にこれら企業の例として、ISV パートナーである F5 と Yubico が、ゼロ トラスト ガイダンス センターのパートナー統合ガイダンスをどのように活用したかご紹介します。</p><h2 id="F5-とマイクロソフトがマルウェアからダーラム郡-ノース-カロライナ州-を救う"><a href="#F5-とマイクロソフトがマルウェアからダーラム郡-ノース-カロライナ州-を救う" class="headerlink" title="F5 とマイクロソフトがマルウェアからダーラム郡 (ノース カロライナ州) を救う"></a>F5 とマイクロソフトがマルウェアからダーラム郡 (ノース カロライナ州) を救う</h2><p><img src="/blog/azure-active-directory/integration-guidance-helps-partners-deliver-zero-trust-solutions/F5.png"></p><p>多くの企業では、SAML や OIDC などの最新の認証プロトコルが採用される前に開発された基幹業務アプリケーションに依存しています。これは、ユーザを認証するために複数の方法を管理しなければならないことを意味し、結果としてユーザー体験を複雑にし、さらにコストも増加させます。<a href="https://www.f5.com/products/security/access-policy-manager">BIG-IP Access Policy Manager (APM)</a> は、アプリケーション、API、データへのアクセスを一元化する F5 のアクセス管理プロキシ ソリューションです。BIG-IP APM を Microsoft Azure AD と統合することで、BIG-IP APM のユーザー インターフェイスへの <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/overview">条件付きアクセス</a> を実現できます。</p><p>ダーラム郡 (アメリカ合衆国ノース カロライナ州に位置する郡) は昨年、深刻なサイバー セキュリティ事件をきっかけに、<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/durham-county-enhances-security-across-a-hybrid-environment-with/ba-p/1633530">Azure AD と F5 BIG-IP APM を用いて、ハイブリッド環境のセキュリティを強化</a> しました。F5 BIG-IP APM により、従業員は従来のレガシーなオンプレミスのアプリにアクセスするために必要な統合ソリューションを得ることができました。F5 は Azure AD を使用して、すべてのアプリにセキュリティ制御を適用するとともに多要素認証を強制し、従業員のログイン場所などの状況に順応したポリシーを適用しています。さらに、このソリューションを利用したセルフ サービスのパスワード リセットにより、パスワードに関するヘルプデスクへの問い合わせが 80% 減少しました。</p><p>【動画】 <a href="https://www.youtube.com/watch?v=jokwi85vVTA">F5 and Microsoft Rescue a County From Malware</a></p><h2 id="ヌナブト州政府、ランサムウェア攻撃を受けて-Yubico-と-Microsoft-にフィッシング対策を依頼"><a href="#ヌナブト州政府、ランサムウェア攻撃を受けて-Yubico-と-Microsoft-にフィッシング対策を依頼" class="headerlink" title="ヌナブト州政府、ランサムウェア攻撃を受けて Yubico と Microsoft にフィッシング対策を依頼"></a>ヌナブト州政府、ランサムウェア攻撃を受けて Yubico と Microsoft にフィッシング対策を依頼</h2><p><img src="/blog/azure-active-directory/integration-guidance-helps-partners-deliver-zero-trust-solutions/Yubico.png"></p><p>2019 年、カナダのヌナブト州政府はスピア フィッシング攻撃を受け、同州の重要な IT リソースがダウンした状態となりました。この攻撃を受け、ID とアプリケーションの保護が同州の最優先課題となりました。</p><p>Azure AD と YubiKey が共同してヌナブト州政府のセキュリティをアップグレードし、独自のニーズに合ったソリューションを提供することができました。同州政府は、フィッシングに強い認証ソリューションを導入したいと考えていました。また、政府機関ではさまざまな Windows ベースのシステムを使用していましたが、それらは遠隔地にあるため、アクセスする際のネットワークが安定していませんでした。これらの課題に対応するために、ネットワーク、電源、クライアント ソフトウェアを必要とせずに、多要素認証に使用できるハードウェア デバイスである YubiKeys を採用しました。詳しくは <a href="https://www.yubico.com/resources/reference-customers/government-of-nunavut/">Yubico の記事</a> と以下の動画をご覧ください。</p><p>【動画】 <a href="https://www.youtube.com/watch?v=BmdlVrepPhg">The Government of Nunavut turns to phishing-resistant YubiKeys after ransomware attack</a></p><h2 id="より詳細について"><a href="#より詳細について" class="headerlink" title="より詳細について"></a>より詳細について</h2><p>私たちは、パートナーの皆様がゼロ トラストの原則を用いて、重要なサイバーセキュリティ ソリューションをお客様に提供していることを非常に誇りに思っています。ゼロ トラストへの対応については、新しく発行された <a href="https://docs.microsoft.com/ja-jp/security/zero-trust/integrate/overview">パートナー統合ガイダンス</a> をご覧ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 10 月 6 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>CloudKnox 社の買収について - 現在利用可能なものと近日公開予定のもの</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/CloudKnox-acquisition-whats-available-now-and-whats-coming-soon/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/CloudKnox-acquisition-whats-available-now-and-whats-coming-soon/</id>
    <published>2021-10-03T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.539Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの竜です。</p><p>本記事は、2021 年 9 月 30 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/cloudknox-acquisition-what-s-available-now-and-what-s-coming/ba-p/2464367">CloudKnox acquisition: what’s available now and what’s coming soon</a> を意訳したものになります。</p><hr><p>皆さん、こんにちは。</p><p><a href="https://blogs.microsoft.com/blog/2021/07/21/microsoft-acquires-cloudknox-security-to-offer-unified-privileged-access-and-cloud-entitlement-management/">CloudKnox Security 社の買収</a>を発表してから 2 ヶ月が経ち、我々のチームは CloudKnox 社の技術を統合するべく取り組んでいる状況です。この発表に多くの方が関心を持ち、様々な質問が寄せられていますので、進捗状況をお伝えするとともにいくつかの質問にお答えしたいと思います。</p><p><strong>現在 CloudKnox を利用していますが、今後も製品を使い続けることはできますか？</strong></p><p>現在 CloudKnox をご利用のお客様は、サービスの中断や価格の変更なく継続して CloudKnox 製品をご利用いただけます。また、CloudKnox をご利用のお客様は引き続き Microsoft からセールス、エンジニアリング、サービスのサポートを受けることができます。Microsoft のセールスおよびサポートは、マルチクラウド下でのアクセス許可の管理におけるニーズにお応えするため、すべての CloudKnox サービスの提供およびサポートを継続いたします。</p><p><strong>CloudKnox 製品を今すぐ試したり購入したりすることはできますか？</strong></p><p>はい、CloudKnox の既存および新規のお客様をサポートするために、弊社ではセールスとサポートのスタッフを拡大しています。CloudKnox をご利用中のお客様ならびにご利用を検討されているお客様は、CloudKnox または Microsoft の担当者にご連絡ください。マルチクラウド下でのアクセス許可管理について弊社よりどのような支援が可能か情報を提供させていただきます。弊社からの連絡をご希望の場合は、<a href="https://cloudknox.io/contact/">こちらから</a>リクエストください。また、お客様の IT 環境の <a href="https://cloudknox.io/risk-assessment/#identity-risk">アクセス許可のリスク アセスメント (無料)</a> のご依頼も受け付けております。</p><p><strong>CloudKnox がマイクロソフトの傘下に入ったということは、Microsoft Azure のみをサポートし、マルチクラウドには対応しなくなるのでしょうか？</strong></p><p>私たちは、多くのお客様がマルチクラウドを活用しており、クラウド全体のセキュリティとコンプライアンスを管理するためのツールとサービスを必要としていることを存じております。お客様がどのクラウドを利用しているかに関わらず、クラウド基盤のエンタイトルメント管理、ID およびガバナンス機能を備えたマルチクラウド ソリューションを提供することに、我々は 100% コミットしています。何より、Microsoft が CloudKnox 社を買収した一番の理由は、お客様がご利用されている AWS、Google Cloud Platform、VMware の管理をより効率的に支援するためでございます。</p><p><strong>今後の CloudKnox の展望はどうでしょうか？</strong></p><p>製品のロードマップや今後の機能強化については、次の数ヶ月の間にお知らせしますので、楽しみにしていただければと思います。また、Microsoft Ignite も目前に迫っています。Microsoft と CloudKnox チームの取り組みをぜひご覧ください。</p><p>短いアップデートとなりますが、本内容が皆様にとって有益で役に立つものであれば幸いです。皆様のご意見、ご感想をお待ちしております。</p><p>Alex</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの竜です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 9 月 30 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcommu</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Graph PowerShell SDK を使用したライセンス管理操作の紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph/</id>
    <published>2021-10-01T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.815Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの中井です。</p><p>先日、以下にて 米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/migrate-your-apps-to-access-the-license-managements-apis-from/ba-p/2464366">Migrate your apps to access the license managements APIs from Microsoft Graph</a> の翻訳ブログを公開いたしました。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/migrate-your-apps-to-access-the-license-managements/">Azure AD Graph および MSOnline での従来のライセンスの割り当て方法が廃止され Microsoft Graph によるライセンス管理に変わります | Japan Azure Identity Support Blog (jpazureid.github.io)</a></p><p>上記記事では、Azure AD Graph エンドポイント廃止に伴い、MSOnline および Azure AD PowerShell モジュールでの従来のライセンス割り当て操作が利用できなくなることがアナウンスされています。そこで本記事では、今後利用が推奨される Microsoft Graph PowerShell (正式名称は Microsoft Graph PowerShell SDK) を使用したライセンス管理の方法をご紹介いたします。</p><h1 id="はじめに-Microsoft-Graph-PowerShell-とは？"><a href="#はじめに-Microsoft-Graph-PowerShell-とは？" class="headerlink" title="はじめに: Microsoft Graph PowerShell とは？"></a>はじめに: Microsoft Graph PowerShell とは？</h1><p><a href="https://docs.microsoft.com/ja-jp/powershell/microsoftgraph/overview?view=graph-powershell-1.0">Microsoft Graph PowerShell</a> は、Microsoft Graph API をコマンドを実行して呼び出せるようにした PowerShell モジュールです。</p><p>では Microsoft Graph API とは何かというと、 Azure AD だけでなく SharePoint、Outlook、Teams などの Microsoft 各サービスにアクセスし、データを取得できる統一のエンドポイントを提供しています。</p><p>Azure AD テナントにおける情報取得は、これまで<a href="https://jpazureid.github.io/blog/azure-active-directory/powershell-module/">MSOnline および Azure AD PowerShell モジュール</a> を用いてきました。Azure AD PowerShell では、2022 年 7 月以降にサポート終了予定の Azure AD Graph API を呼び出しており、上述の翻訳記事では、Set-AzureADUserLicense を中心とするライセンス管理のコマンドが廃止となる予定であることをアナウンスいたしました。</p><p><strong>ライセンス管理操作以外のコマンドは従来通りレスポンスを受け取れる予定です。</strong></p><p>それ以外のコマンドについて Azure AD や MSOnline の PowerShell で提供されていたコマンドで MS Graph PowerShell コマンドで利用できる対照表としては次の公開情報があります。</p><p><a href="https://docs.microsoft.com/en-us/powershell/microsoftgraph/azuread-msoline-cmdlet-map?view=graph-powershell-1.0">Find Azure AD and MSOnline cmdlets in Microsoft Graph PowerShell</a></p><p>対照表にしたがって、 MS Graph コマンドが利用できるものについての移行も併せてお願いしたいところではあるのですが、<br>実際のところ、対応表に記載があるコマンドであっても、従来のパラメーターやプロパティが Microsoft Graph PowerShell コマンドでは一部利用できないものもあります。<br>ライセンス管理以外のコマンドは現時点 (2021 年 10 月段階) では今後も利用可能な見込みであり、それ以外のコマンドについて無理に急いで移行を進める必要が無いということも付記させていただきます。</p><p>状況に変化がありましたら、改めてサポート チームでのブログでもお知らせを予定しています。</p><p>(Azure AD Graph API を呼び出すアプリケーションを作成されている場合、<a href="https://docs.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-overview">公開情報</a> を参考に、Microsoft Graph API への移行をお願いいたします。)</p><hr><p>さて、前置きが長くなってしまいましたが、以下より、Microsoft Graph PowerShell を用いたライセンス管理操作についてご紹介いたします！</p><p>非常にボリュームのある内容となっていますので、目次「3. ライセンス情報の取得」から、知りたい操作のリンクの内容を参照いただくだけでもコマンドを確認可能です (もちろん、初めての操作の場合は 1 や 2 の事前準備が必要です)。</p><p>本記事で紹介する Microsoft Graph PowerShell メソッドの参考情報は、以下の通りとなっております。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/powershell/module/microsoft.graph.users.actions/set-mguserlicense?view=graph-powershell-1.0">Set-MgUserLicense</a></li><li><a href="https://docs.microsoft.com/ja-jp/powershell/module/microsoft.graph.groups/set-mggrouplicense?view=graph-powershell-1.0">Set-MgUserGroupLicense</a></li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ol><li><a href="#idx1">Microsoft Graph PowerShell のインストール</a></li><li><a href="#idx2">Connect-MgGraph による Azure AD へのサインイン</a><ul><li><a href="#idx2-1">管理者の資格情報を利用する場合</a></li><li><a href="#idx2-2">サービス プリンシパル（アプリケーション）を利用する方法</a></li></ul></li><li><a href="#idx3">ライセンス情報の取得</a><ul><li><a href="#idx3-1">テナントに紐づくライセンス情報を確認する</a></li><li><a href="#idx3-2">ユーザーに割り当て済みのライセンスを確認する</a></li></ul></li><li><a href="#idx4">シナリオ 1: ユーザーにライセンスを割り当てる</a><ul><li><a href="#idx4-1">すべてのサービス プランを有効にして特定のライセンスを割り当てる</a></li><li><a href="#idx4-2">特定のサービス プランを無効にして特定のライセンスを割り当てる</a></li><li><a href="#idx4-3">複数のサービス プランを無効にして特定のライセンスを割り当てる</a></li><li><a href="#idx4-4">[新機能] グループにライセンスを割り当てる</a></li></ul></li><li><a href="#idx5">シナリオ 2: ユーザーから特定のライセンスを削除する</a><ul><li><a href="#idx5-1">ユーザーから特定のライセンスを削除する</a></li></ul></li><li><a href="#idx6">シナリオ 3: 割り当て済みライセンスの無効にするサービスプランを変更する</a><ul><li><a href="#idx6-1">割り当て済みライセンスの無効にするサービス プランを変更する</a></li><li><a href="#idx6-2">割り当て済みライセンスの無効にしているサービス プランをすべて有効にする</a></li><li><a href="#idx6-3">すでに一部のサービス プランを無効にしているライセンスに対して、追加で特定のサービス プランを無効にする</a></li><li><a href="#idx6-4">すでに 1 つ以上のサービス プランを無効にしているライセンスに対して、特定のサービス プランのみを無効から有効に変える</a></li></ul></li><li><a href="#idx7">シナリオ 4: ライセンスを変更する</a></li><li><a href="#idx8">操作完了後のサインアウト</a></li><li><a href="#idx9">[補足] Set-MgUserLicense : License assignment cannot be done for user with invalid usage location. が出力される場合</a></li></ol><h1 id="idx1">1. Microsoft Graph PowerShell のインストール</h1><p>PowerShell を管理者権限で開き、以下コマンドで、Microsoft Graph PowerShell SDK を操作端末にインストールします。</p><p>※ インストール先をローカル ユーザーのみに限定する場合は、<code>-Scope CurrentUser</code> パラメーターを付けます。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Install-Module Microsoft.Graph</span><br></pre></td></tr></table></figure><p>公開情報：<a href="https://docs.microsoft.com/en-us/graph/powershell/installation">Install the Microsoft Graph PowerShell SDK - Microsoft Graph | Microsoft Docs</a></p><h1 id="idx2">2. Connect-MgGraph による Azure AD への認証</h1><p>Azure AD への認証方法として、<strong>管理者の資格情報を使用する方法</strong>と、<strong>サービス プリンシパル</strong>を利用する方法があります。</p><p>サービス プリンシパルを利用する方法とは、簡単に言うと証明書を発行したアプリケーションにアクセス許可を付与し、アプリケーション経由で Azure AD の認証および操作を行う方法です。管理者自身が操作してライセンスの管理を行う場合は管理者の資格情報を使用する方法でも構いません。バッチ処理など、無人化や自動化を行う場合はサービス プリンシパルを使用します。</p><h2 id="idx2-1">管理者の資格情報を使用する場合</h2><p>以下のコマンドを実行して、サインインとライセンスの管理に必要なアクセス許可への同意を行います。</p><p>認証画面がポップアップしますので、管理者アカウントでサインします。アクセス許可の同意を求められたら [承諾] をクリックします。[組織の代理として同意する] はオフのままで問題ありません。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Connect-MgGraph -Scopes <span class="string">&quot;Organization.Read.All&quot;</span>,<span class="string">&quot;User.ReadWrite.All&quot;</span></span><br></pre></td></tr></table></figure><p>テナントに紐づくライセンスの情報を確認するために Organization.Read.All のアクセス許可が必要です。またライセンスの付与などのために User.ReadWrite.All のアクセス許可が必要です。</p><p>その後、シナリオ 1 以降の操作を行うために必要なモジュールをインポートしておきます。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Import-Module -Name Microsoft.Graph.Users</span><br></pre></td></tr></table></figure><h2 id="idx2-2">サービス プリンシパル（アプリケーション）を使用する方法</h2><p>基本的な内容は以下の公開情報となります。</p><p>公開情報: <a href="https://docs.microsoft.com/ja-jp/graph/powershell/app-only?tabs=azure-portal">Microsoft の PowerShell SDK でアプリGraphを使用する - Microsoft Graph | Microsoft Docs</a></p><p>まず、Azure AD にてアプリケーションの登録を行い、サービス プリンシパルを作成します。</p><ol><li>グローバル 管理者で Azure Portal にサインインし、[Azure Active Directory] – [アプリの登録] – [新規登録] をクリックします。</li><li>[名前] に任意のアプリの名前を入力します。(例: App01)</li><li>[サポートされているアカウントの種類] から [この組織ディレクトリのみに含まれるアカウント] を選択します。</li><li>[リダイレクト URI] で [Web] を選択し、テキスト ボックスは空欄のままにし、[登録] をクリックします。<br><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph/image1.png"></li><li>表示された [アプリケーション (クライアント) ID] と [ディレクトリ (テナント) ID] の値を控えておきます。<br><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph/image2.png"></li><li>[API のアクセス許可] – [+アクセス許可の追加] をクリックします。[Microsoft Graph] – [アプリケーションの許可] をクリックし、[Organization.Read.All] と [User.ReadWrite.All] を選択して [アクセス許可の追加] をクリックします。<br><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph/image3.png"></li><li>[&lt;テナント名&gt; に管理者の同意を与えます] をクリックします。確認が表示されるので [はい] をクリックします。</li></ol><p>続いて、証明書を発行します。</p><ol start="8"><li><p>PowerShell を起動し、以下のようにコマンドを実行します。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$mycert</span> = New-SelfSignedCertificate -Subject <span class="string">&quot;CN=SelfSignedCert&quot;</span> -CertStoreLocation <span class="string">&quot;Cert:\CurrentUser\My&quot;</span>  -KeyExportPolicy Exportable -KeySpec Signature</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;.\SelfSignedCert.cer&quot; は、エクスポート先のパスを適宜変更ください。</span></span><br><span class="line"><span class="variable">$mycert</span> | Export-Certificate -FilePath <span class="string">&quot;.\SelfSignedCert.cer&quot;</span>  </span><br><span class="line"><span class="variable">$mycert</span> | Select Thumbprint</span><br></pre></td></tr></table></figure></li><li><p>Azure Portal で先ほど登録したアプリのページに戻り、[証明書とシークレット] をクリックします。</p></li><li><p>[証明書のアップロード] をクリックし、9 にて出力された SelfSignedCert.cer をアップロードします。</p></li></ol><p>以上で、準備は完了となります。</p><p>以下コマンドにて、サービス プリンシパルを使用して Azure AD に接続することができます。また、管理者の資格情報を使用する場合と同様、シナリオ 1 以降の操作を行うために必要なモジュールをインポートします。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Connect-MgGraph -Clientid <span class="string">&quot;&lt;登録したアプリのアプリケーション (クライアント) ID&gt;&quot;</span> -TenantId <span class="string">&quot;&lt;アプリを登録したテナントのディレクトリ (テナント) ID&gt;&quot;</span> -CertificateThumbprint <span class="string">&quot;&lt;証明書の拇印&gt;&quot;</span></span><br><span class="line">Import-Module -Name Microsoft.Graph.Users</span><br></pre></td></tr></table></figure><p>▼ 実行例</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Connect-MgGraph -Clientid <span class="string">&quot;89a531e4-38a8-41b3-9a5f-xxxxxxx&quot;</span> -TenantId <span class="string">&quot;a818a9d9-4bf7-4316-b8bb-xxxxxx&quot;</span> -CertificateThumbprint <span class="string">&quot;F683EBBE56184C197699930xxxxxxxxxx&quot;</span></span><br><span class="line">Import-Module -Name Microsoft.Graph.Users</span><br></pre></td></tr></table></figure><h1 id="idx3">3. ライセンス情報の取得</h1><h2 id="idx3-1">テナントに紐づくライセンス情報を確認する</h2><p>以下のコマンドを実行し、テナントに紐づくライセンス情報を確認します。</p><p>※ -Wrap 引数は、出力結果を途切れず折り返し表示するためのパラメーターです。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Get-MgSubscribedSku | ft Id, SkuId, SkuPartNumber -Wrap</span><br></pre></td></tr></table></figure><p>出力例<br><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph/licenseDetail1.png"></p><p>ライセンスの付与の際には SkuId の値を使用します。そのため、どの SkuId がこれから管理したいライセンスなのかを判別する必要があります。</p><p>SkuPartNumber の値から推測できるものもありますが、詳細は以下の公開情報に記載されていますのでそちらをご参照ください。例えば Microsoft 365 E5 の SkuPartNumber は SPE_E5 で SkuId は 06ebc4ee-1bb5-47dd-8120-11324bc54e06 です。</p><p>公開情報: <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/licensing-service-plan-reference">ライセンスのための製品名とサービス プラン 識別子</a></p><p>さらにライセンスの中の一部のサービス プランを無効にしたいというシナリオの場合、サービス プランの情報も確認しておく必要があります。その場合は以下のようにコマンドを実行します。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Get-MgSubscribedSku -SubscribedSkuId <span class="string">&quot;&lt;Get-MgSubscribedSku コマンドで確認した、サービス プランを確認したいライセンスの Id&gt;&quot;</span> | Select-Object -ExpandProperty ServicePlans | ft ServicePlanId, ServicePlanName</span><br></pre></td></tr></table></figure><p>▼ 実行例</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Get-MgSubscribedSku -SubscribedSkuId <span class="string">&quot;a818a9d9-4bf7-4316-b8bb-e0f1a52ce5ea_184efa21-98c3-4e5d-95ab-d07053a96e67&quot;</span> | Select-Object -ExpandProperty ServicePlans | ft ServicePlanId, ServicePlanName</span><br></pre></td></tr></table></figure><p>出力例<br><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph/licenseDetail2.png"></p><h2 id="idx3-2">ユーザーに割り当て済みのライセンスを確認する</h2><p>ユーザーに割り当てられているライセンスを確認するには、<code>Get-MgUser</code> コマンドを使用する方法と、<code>Get-MgUserLicenseDetail</code> コマンドを使用する方法があります。</p><ul><li><code>Get-MgUser</code> コマンド</li></ul><p>Get-MgUser コマンドを使用することで、Set-MgUserLicense コマンドでも使用する MicrosoftGraphAssignedLicense の内容を確認することができます。（出力例は次のコマンド例と一緒に掲載します）</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Get-MgUser -UserId &lt;対象ユーザーの UPN&gt; -Property AssignedLicenses | Select-Object -ExpandProperty AssignedLicenses</span><br></pre></td></tr></table></figure><ul><li><code>Get-MgUserLicenseDetail</code> コマンド</li></ul><p>Get-MgUserLicenseDetail コマンドを使用することで、ユーザーに割り当てたライセンスやサービス プランのプロビジョニング状況を確認することができます。以下のように実行するとユーザーに割り当てたライセンスの情報を確認できます。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Get-MgUserLicenseDetail -UserId &lt;対象ユーザーの UPN&gt;</span><br></pre></td></tr></table></figure><p>出力例<br><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph/licenseDetail3.png"></p><p>サービス プランの情報を確認するには以下のようにコマンドを実行します。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Get-MgUserLicenseDetail -UserId &lt;対象ユーザーの UPN&gt; | Select-Object -ExpandProperty ServicePlans</span><br></pre></td></tr></table></figure><p>出力例<br><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph/licenseDetail4.png"></p><h1 id="idx4">シナリオ 1: ユーザーにライセンスを割り当てる</h1><p>ユーザーにライセンスを割り当てます。まだライセンスが何も割り当てられていない場合であっても、既に割り当てられており追加する場合でも、どちらも手順は同じです。</p><h2 id="idx4-1"> すべてのサービス プランを有効にして特定のライセンスを割り当てる</h2><p>割り当てるライセンスの SkuId を指定した MicrosoftGraphAssignedLicense オブジェクトを作成し、<code>Set-MgUserLicense</code> コマンドの AddLicenses パラメーターに配列として指定します。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$License1</span> = New-Object -TypeName Microsoft.Graph.PowerShell.Models.MicrosoftGraphAssignedLicense -Property @&#123;SkuId = <span class="string">&quot;&lt;割り当てるライセンスの SkuId&gt;&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">Set-MgUserLicense -UserId &lt;対象ユーザーの UPN&gt; -AddLicenses @(<span class="variable">$License1</span>) -RemoveLicenses @()</span><br></pre></td></tr></table></figure><p>▼ 実行例</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$License1</span> = New-Object -TypeName Microsoft.Graph.PowerShell.Models.MicrosoftGraphAssignedLicense -Property @&#123;SkuId = <span class="string">&quot;06ebc4ee-1bb5-47dd-8120-11324bc54e06&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">Set-MgUserLicense -UserId TestGraphUser01@contoso.onmicrosoft.com -AddLicenses @(<span class="variable">$License1</span>) -RemoveLicenses @()</span><br></pre></td></tr></table></figure><p>複数のライセンスを割り当てる場合はそれぞれの MicrosoftGraphAssignedLicense オブジェクトを作成し、<code>Set-MgUserLicense</code> コマンドの AddLicenses パラメーターに、以下のようにカンマ区切りで指定します。</p><p>▼ 実行例</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Set-MgUserLicense -UserId TestGraphUser01@contoso.onmicrosoft.com -AddLicenses @(<span class="variable">$License1</span>, <span class="variable">$License2</span>) -RemoveLicenses @()</span><br></pre></td></tr></table></figure><h2 id="idx4-2"> 特定のサービス プランを無効にして特定のライセンスを割り当てる</h2><p>ライセンス割り当て時に無効にするサービス プランがある場合は DisablePlans に ServicePlanId を配列として指定します。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$License1</span> = New-Object -TypeName Microsoft.Graph.PowerShell.Models.MicrosoftGraphAssignedLicense -Property @&#123;SkuId = <span class="string">&quot;&lt;割り当てるライセンスの SkuId&gt;&quot;</span>; DisabledPlans = @(<span class="string">&quot;&lt;無効にするサービス プランの ServicePlanId&gt;&quot;</span>)&#125;</span><br><span class="line"></span><br><span class="line">Set-MgUserLicense -UserId &lt;対象ユーザーの UPN&gt; -AddLicenses @(<span class="variable">$License1</span>) -RemoveLicenses @()</span><br></pre></td></tr></table></figure><h2 id="idx4-3">複数のサービス プランを無効にして特定のライセンスを割り当てる</h2><p>無効にするサービス プランが複数ある場合も、「複数のライセンスを割り当てる」 同様、 DisablePlans に ServicePlanId をカンマ区切りで指定します。</p><h2 id="idx4-4">[新機能] グループにライセンスを割り当てる</h2><p>Microsoft Graph PowerShell では、<code>Set-MgGroupLicense</code> コマンドにより、グループに対するライセンス割り当てを行うことが可能となりました。</p><p>使い方は、ライセンス割り当て対象として UserId ではなく GroupId パラメーターを用います。その他の引数は <code>Set-MgUserLicense</code> と同様です。</p><p>▼ すべてのサービス プランを有効にして特定のライセンスを割り当てる場合の実行例</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Set-MgGroupLicense -GroupId &lt;対象グループの ObjectId&gt; -AddLicenses @(<span class="variable">$License1</span>) -RemoveLicenses @()</span><br></pre></td></tr></table></figure><h1 id="idx5">シナリオ 2: ユーザーからライセンスを削除する</h1><h2 id="idx5-1">ユーザーから特定のライセンスを削除する</h2><p>ユーザーからライセンスを削除するには <code>Set-MgUserLicense</code> コマンドの RemoveLicenses パラメーターに削除したいライセンスの SkuId を配列として指定します。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Set-MgUserLicense -UserId &lt;対象ユーザーの UPN&gt; -AddLicenses @() -RemoveLicenses @(<span class="string">&quot;&lt;削除するライセンスの SkuId&gt;&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="idx6"> シナリオ 3: 割り当て済みライセンスの無効にするサービス プランを変更する</h1><p>ライセンスを割り当てる場合と同じ方法で、DisabledPlans の内容を変更してコマンドを実行することにより、無効にするサービス プランを変更することができます。上書きになるので、元々無効だったサービス プランを引き続き無効にしたいのであれば DisabledPlans に改めて指定する必要があります。</p><h2 id="idx6-1">割り当て済みライセンスの無効にするサービス プランを変更する</h2><p>以下の例では、割り当て済みのライセンスに関して指定した 2 つのサービス プランだけを無効にします。指定していないサービス プランは有効になります。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$License1</span> = New-Object -TypeName Microsoft.Graph.PowerShell.Models.MicrosoftGraphAssignedLicense -Property @&#123;SkuId = <span class="string">&quot;&lt;無効にするサービス プランを変更する割り当て済みライセンスの SkuId&gt;&quot;</span>; DisabledPlans = @(<span class="string">&quot;&lt;無効にするサービス プランの ServicePlanId (1 つ目)&gt;&quot;</span>, <span class="string">&quot;&lt;無効にするサービス プランの ServicePlanId (2 つ目)&gt;&quot;</span>)&#125;</span><br><span class="line"></span><br><span class="line">Set-MgUserLicense -UserId &lt;対象ユーザーの UPN&gt; -AddLicenses <span class="variable">$License1</span> -RemoveLicenses @()</span><br></pre></td></tr></table></figure><h2 id="idx6-2">割り当て済みライセンスの無効にしているサービス プランをすべて有効にする</h2><p>割り当て済みライセンスの無効にしているサービス プランをすべて有効にするには、DisabledPlans に何も指定をせずにコマンドを実行します。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$License1</span> = New-Object -TypeName Microsoft.Graph.PowerShell.Models.MicrosoftGraphAssignedLicense -Property @&#123;SkuId = <span class="string">&quot;&lt;すべてのサービス プランを有効にする割り当て済みライセンスの SkuId&gt;&quot;</span>; DisabledPlans = @()&#125;</span><br><span class="line"></span><br><span class="line">Set-MgUserLicense -UserId &lt;対象ユーザーの UPN&gt; -AddLicenses <span class="variable">$License1</span> -RemoveLicenses @()</span><br></pre></td></tr></table></figure><h2 id="idx6-3">すでに一部のサービス プランを無効にしているライセンスに対して、追加で特定のサービス プランを無効にする</h2><p>すでに一部のサービス プランを無効にしているライセンスに対して、追加で特定のサービス プランを無効にする場合、現在の DisablePlans の内容を取得した上で追加を行います。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$License1</span> = Get-MgUser -UserId &lt;対象ユーザーの UPN&gt; -Property AssignedLicenses | Select-Object -ExpandProperty AssignedLicenses | ?&#123;<span class="variable">$_</span>.SkuId -eq <span class="string">&quot;&lt;対象の割り当て済みライセンスの SkuId&gt;&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$License1</span>.DisabledPlans += <span class="string">&quot;&lt;追加で無効にするサービス プランの ServicePlanId&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">Set-MgUserLicense -UserId &lt;対象ユーザーの UPN&gt; -AddLicenses <span class="variable">$License1</span> -RemoveLicenses @()</span><br></pre></td></tr></table></figure><h2 id="idx6-4">すでに 1 つ以上のサービス プランを無効にしているライセンスに対して、特定のサービス プランのみを無効から有効に変える</h2><p>すでに 1 つ以上のサービス プランを無効にしているライセンスに対して、特定のサービス プランのみを無効から有効に変える現在の DisablePlans の内容を取得した上で有効にするサービス プランを取り除きます。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$License1</span> = Get-MgUser -UserId &lt;対象ユーザーの UPN&gt; -Property AssignedLicenses | Select-Object -ExpandProperty AssignedLicenses | ?&#123;<span class="variable">$_</span>.SkuId -eq <span class="string">&quot;&lt;対象の割り当て済みライセンスの SkuId&gt;&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$License1</span>.DisabledPlans = @(<span class="variable">$License1</span>.DisabledPlans | ?&#123;<span class="variable">$_</span> -ne <span class="string">&quot;&lt;無効から有効に変えるサービス プランの ServicePlanId&gt;&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">Set-MgUserLicense -UserId &lt;対象ユーザーの UPN&gt; -AddLicenses <span class="variable">$License1</span> -RemoveLicenses @()</span><br></pre></td></tr></table></figure><h1 id="idx7">シナリオ 4: ライセンスを変更する</h1><p>現在割り当て済みのライセンスを削除して別のライセンスを割り当てるには、現在割り当て済みのライセンスは RemoveLicenses に指定し、新しく割り当てるライセンスを AddLicenses に指定します。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$License1</span> = New-Object -TypeName Microsoft.Graph.PowerShell.Models.MicrosoftGraphAssignedLicense -Property @&#123;SkuId = <span class="string">&quot;&lt;新しく割り当てるライセンスの SkuId&gt;&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">Set-MgUserLicense -UserId TestGraphUser01@contoso.onmicrosoft.com -AddLicenses @(<span class="variable">$License1</span>) -RemoveLicenses @(<span class="string">&quot;&lt;現在割り当て済みのライセンス&gt;&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="idx8">4. 操作完了後のサインアウト</h1>以下のコマンドを実行し、Azure AD よりサインアウトします。<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Disconnect-MgGraph</span><br></pre></td></tr></table></figure><h1 id="idx9">[補足] Set-MgUserLicense : License assignment cannot be done for user with invalid usage location. が出力される場合</h1><p><code>Set-MgUserLicense</code> を実行し、以下のようなエラーが出力される場合は、ライセンス付与対象のユーザーに UsageLocation（利用場所）属性が設定されていないことが原因です。</p><p>エラー例</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Set-MgUserLicense -UserId TestGraphUser01@contoso.onmicrosoft.com -AddLicenses @(<span class="variable">$License1</span>) -RemoveLicenses @()</span><br><span class="line">Set-MgUserLicense : License assignment cannot be <span class="keyword">done</span> <span class="keyword">for</span> user with invalid usage location.</span><br><span class="line">At line:1 char:1</span><br><span class="line">+ Set-MgUserLicense -UserId TestGraphUser01@contoso.onmicrosoft.com -AddLicenses @ ...</span><br><span class="line">+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">    + CategoryInfo          : InvalidOperation: (&#123; UserId = test...ionJsonSchema &#125;:&lt;&gt;f__AnonymousType10`2) [Set-MgUserLice</span><br><span class="line">   nse_AssignExpanded], RestException`1</span><br><span class="line">    + FullyQualifiedErrorId : Request_BadRequest,Microsoft.Graph.PowerShell.Cmdlets.SetMgUserLicense_AssignExpanded</span><br></pre></td></tr></table></figure><p>ライセンスを割り当てるユーザーは、事前に UsageLocation 属性が設定されている必要があるため、もし、上記エラーが出た場合は、以下のようなコマンドで UsageLocation を設定します。</p><p>この例ではユーザーの UsageLocation を ”JP”（日本） に設定します。<br>その後、ライセンスの割り当てなどのコマンドを再実行ください。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Update-MgUser &lt;対象ユーザーの UPN&gt; -UsageLocation <span class="string">&quot;JP&quot;</span></span><br></pre></td></tr></table></figure><p>また、UsageLocation 属性が設定されているかどうかは、[Azure Active Directory] &gt; [すべてのユーザー] &gt; [&lt;ライセンス付与対象のユーザー&gt;] より、プロファイルの「利用場所」項目から確認可能です。</p><p><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph/image4.png"></p><p>本記事が皆様の参考となれば幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの中井です。&lt;/p&gt;
&lt;p&gt;先日、以下にて 米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcommunity.microso</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Microsoft Graph" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Graph/"/>
    
  </entry>
  
  <entry>
    <title>Identity Protection のシグナル品質と表示の向上</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/announcing-improved-identity-protection-signal-quality-and/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/announcing-improved-identity-protection-signal-quality-and/</id>
    <published>2021-09-26T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.579Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2021 年 9 月 23 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/announcing-improved-identity-protection-signal-quality-and/ba-p/2464410">Announcing Improved Identity Protection Signal Quality and Visibility</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>本日は、Identity Protection のリスク評価とレポート表示の改善をご紹介します。これらの改善により、新たな攻撃ベクターをより検知できるようになり、それによりお客様が最も重要なアラートに集中できるようになります。検出のシグナル品質を向上させることにより、低リスクに該当するサインインのアラート量を 60 % 以上削減するとともに、セッション クッキーの [見慣れないサインインプロパティ] を導入し、さらに非対話型のリスクのあるサインインをレポートに表示できるように改善しました。</p><p>以下では、Identity Security チームのシニア プログラム マネージャーである Sarah Handler と、同チームのデータ サイエンティストである Feifan Jian が、これらの改善点とその背景にあるデータ サイエンスをご紹介します。</p><hr><p>皆さん、こんにちは。</p><p>今回ご紹介する改善点は、組織のより良い ID 保護、そして調査におけるユーザー体験の向上です。ID ベースの攻撃は、昨年から進化および拡大しています。この攻撃に対応するため、私たちチームはアラートの検知範囲を拡大するとともに、より信頼性の高いアラートを表示するようにし、お客様が重要な問題に集中できるようシステムを改善しました。 </p><p>まず、見慣れないサインインのプロパティが検出する範囲を拡大することにより、非対話型のサインインを検出することができるようになりました。見慣れないサインインのプロパティは、ユーザーの現在のサインインと過去のサインインの傾向がどれだけ異なるかをリアルタイムに評価します。以前までは、上記の検出は対話型のサインインに対してのみ行われていましたが、現在はセッション クッキーも評価に含むよう改善しました。ほとんどのテナントでは、この機能によって見慣れないサインインのプロパティの検出数が大幅に増加することはありませんが、見慣れないサインインのプロパティのフラグが立てられた非対話型のサインインは、トークンのリプレイ攻撃の可能性があるため、より慎重に確認する必要があります。</p><p>非対話型の見慣れないサインインのプロパティの検出結果は、[リスク検出] および [危険なサインイン] のレポートで確認可能です。危険なサインイン レポートでは、既定で対話型および非対話型の両方を表示するようにいたしました。下図のとおり、[サインインの種類] フィルターを使用することで、表示を切り替えることができます。</p><p>(Azure Active Directory &gt; セキュリティ &gt; Identity Protection &gt; 危険なサインイン)<br><img src="/blog/azure-active-directory/announcing-improved-identity-protection-signal-quality-and/IdentityProtection.png"></p><p>さらに、危険なサインインのうち、低リスクに該当する信号対雑音比 (S/N 比) を大幅に改善しました。多くのお客様より、調査する際に低リスクのサインインが多すぎるというご意見をいただいておりました。管理者やセキュリティ担当者が、最も重要な検出に集中できるようにするため、シグナル品質と検出方法を改善いたしました。その結果、低リスクの危険なサインインに対するアラート数を <strong>60% 以上削減し、同時に精度を大幅に向上させました。</strong></p><p>今回の変更を担当したデータ サイエンティストの Fefian Jian 氏に、どのように実現したかを聞いてみましょう。</p><h2 id="変更の裏側-今回の改善を支えるデータ-サイエンス"><a href="#変更の裏側-今回の改善を支えるデータ-サイエンス" class="headerlink" title="変更の裏側: 今回の改善を支えるデータ サイエンス"></a>変更の裏側: 今回の改善を支えるデータ サイエンス</h2><p>Identity Protection の検知システムは、リアルタイム (認証時) とオフライン (認証後) の両方で実行され、サインインやユーザーが侵害されているかどうかを判断します。認証後に実行されるオフライン機械学習モデルは、サインインを複数の異なる機能とアルゴリズムで採点し、侵害されたサインインかどうかを判断します。このモデルの出力は、サインインのリスク レベルを集約したものであり、つまりサインインが侵害されているかどうかの最新の評価結果となります。</p><p>今回、オフラインの機械学習モデルに変更を加えることで、精度を向上させ、リスクの低い危険なサインインのノイズ (アラート) を低減しました。この変更により、<strong>リスクが少ないサインインのアラート数が 60% 以上減少</strong>し、アラートの質を意味する精度が <strong>100％ 向上</strong>しました。つまり、お客様の環境においてリスクの低い危険なサインインのアラート数が減り、検知の質は向上するということになります。</p><h2 id="これらの改善された機能を是非ご利用ください"><a href="#これらの改善された機能を是非ご利用ください" class="headerlink" title="これらの改善された機能を是非ご利用ください"></a>これらの改善された機能を是非ご利用ください</h2><p>ご案内した改善は Identity Protection に自動的に展開されており、本日から機能をご利用することができます。お客様の環境を最大限に保護し、リスク評価の恩恵を得るためには、条件付きアクセス ポリシーを設定することで、組織内の危険なサインインや危険なユーザーを自動的に修復することをお勧めします。詳しくは、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/identity-protection/howto-identity-protection-configure-risk-policies">方法:リスク ポリシーを構成して有効にする</a> をご覧ください。 </p><p>よりセキュアな環境にしましょう！</p><p>Sarah Handler (@sarahhandler)<br>Senior Program Manager<br>Microsoft Identity Security and Protection Team  </p><p>Feifan Jian<br>Data Scientist II<br>Microsoft Identity Security and Protection Team</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 9 月 23 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft アカウントにおけるパスワード削除機能のご紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-password-removal-for-microsoft-accounts/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-password-removal-for-microsoft-accounts/</id>
    <published>2021-09-17T01:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.763Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2021 年 9 月 15 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/introducing-password-removal-for-microsoft-accounts/ba-p/2747280">Introducing password removal for Microsoft Accounts</a> を意訳したものになります。</p><hr><p>フィッシングやパスワード スプレー、クレデンシャル スタッフィングなどの一般的な攻撃は、「人間が設定するパスワード (行動) は予測可能である」という不変の真理に基づいています。悪意のある攻撃者は、この “予測可能性” を利用することで、30 年前のツールを使っているにもかかわらず、上記のような攻撃をほぼ成功させています。</p><p>本日より、コンシューマー向けの Microsoft アカウントをお使いの皆様は、完全にパスワードレスに移行いただけるようになりました。Microsoft アカウントからパスワードを削除することができ、新しいアカウントをパスワードなしで作成することもできます。サインイン時には、パスワード以外の認証方法である、Microsoft Authenticator アプリ、Windows Hello、物理的なセキュリティ キーを利用することで、より安全で便利な方法でサインインすることができます。</p><p>設定に必要なのは、以下の 3 つのステップだけです。</p><ol><li><p>該当のMicrosoft アカウントで、<a href="https://account.live.com/proofs/manage/additional">Advanced Security Options</a> にアクセスします。</p></li><li><p>[パスワードレス アカウント] 配下の [有効にする] をクリックします。</p></li></ol><p><img src="/blog/azure-active-directory/introducing-password-removal-for-microsoft-accounts/PasswordlessSetting01.PNG"></p><ol start="3"><li>メッセージに沿って設定を進めます。</li></ol><p><img src="/blog/azure-active-directory/introducing-password-removal-for-microsoft-accounts/PasswordlessSetting02.PNG"></p><p>パスワードを削除した後は、Microsoft Authenticator アプリからの通知を承認することで、アカウントにサインインできます。</p><p><img src="/blog/azure-active-directory/introducing-password-removal-for-microsoft-accounts/PasswordlessSetting03.PNG"></p><p>こちらの <a href="https://www.microsoft.com/security/blog/2021/09/15/the-passwordless-future-is-here-for-your-microsoft-account/">あなたの Microsoft アカウントにパスワードレスの未来を</a> という記事では、Vasu Jakkal 氏によりなぜパスワードなしでサインインすることが、より速く、より簡単で、そしてより安全であるか詳しく説明されています。何よりもパスワードがなくなってしまえば、パスワードを覚えておく必要はありません！</p><h2 id="パスワードが企業にもたらす脆弱性"><a href="#パスワードが企業にもたらす脆弱性" class="headerlink" title="パスワードが企業にもたらす脆弱性"></a>パスワードが企業にもたらす脆弱性</h2><p>攻撃者はたった 1 つのパスワードがあればそのアカウントに侵入し、組織に潜入することができます。従業員の 100 人に 1 人でも重要なアカウントに簡単に推測可能なパスワードを設定していれば、その組織は危険な状況にあるということです。驚くことに、2011 年に最もよく使われたパスワード (123456、abc123、iloveyou など) は、いまだによく使われるパスワードのトップ 20 にランクインしています。</p><p>過去 10 年間、侵害のリスクを 99.9% 削減できる 2 段階認証を提唱してきました。パスワードに加え、追加の要素で本人確認を行うことは有効な手段ではありますが、ハッカーはすでに <a href="https://jpazureid.github.io/blog/azure-active-directory/all-your-creds-are-belong-to-us/">第 2 段階認証を突破</a> し始めています。今後もパスワードが認証の仕組みの一部である限り、攻撃に脆弱なままとなります。</p><h2 id="パスワードレス技術を取り入れましょう"><a href="#パスワードレス技術を取り入れましょう" class="headerlink" title="パスワードレス技術を取り入れましょう"></a>パスワードレス技術を取り入れましょう</h2><p>数年前、組織におけるパスワードの使用を終わらせるための 4 つのステップを紹介しました。</p><p><img src="/blog/azure-active-directory/introducing-password-removal-for-microsoft-accounts/Passwordless04.PNG"></p><p>わたしたち ID 製品チームは、ディレクトリからパスワードをなくすため、Microsfot の製品チームや標準化団体と協力してきました。その結果、本日 <a href="https://www.microsoft.com/security/blog/2020/12/17/a-breakthrough-year-for-passwordless-technology/">非常に大きな進歩</a> をご紹介することができました。 </p><p>10 月 13 日に開催されるデジタル イベント<a href="https://passwordlessfuturedigitalevent.eventcore.com/auth/login?ocid=AID3037729_QSG_542099">パスワードレスの未来を今始めよう</a> では、私のチーム メンバーである Vasu、そして Microsoft の専門家がパスワードレスの未来を築くための見識とベストプラクティスを共有します。ご興味のある方は、是非ともご参加ください。</p><h2 id="今後の展開"><a href="#今後の展開" class="headerlink" title="今後の展開"></a>今後の展開</h2><p>私たちは、より多くのお客様にパスワードレスを提供するため、これからも技術革新を進めてまいります。パスワードなしでサインインする新しい方法を構築することに加えて、Azure AD アカウントのパスワードをなくすための開発も間もなく開始します。将来的には、管理者が特定のユーザーに対して、パスワードを必要とするか、利用してもよいとするか、あるいは使用しないかを選択できるようになります。管理者の設定に沿って、ユーザーはアカウント作成時にパスワードを設定しないようにしたり、既存のアカウントからパスワードを削除したりを選択できるようになります。</p><p>これからもパスワードレスの未来を築いていく上で、皆様からのフィードバックは非常に貴重なものとなります。ご質問やご意見は、answers.microsoft.com までお寄せください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 9 月 15 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD Graph および MSOnline での従来のライセンスの割り当て方法が廃止され Microsoft Graph によるライセンス管理に変わります</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/migrate-your-apps-to-access-the-license-managements/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/migrate-your-apps-to-access-the-license-managements/</id>
    <published>2021-09-17T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.787Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 馮 です。</p><p>本日は、2021 年 8 月 26 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/migrate-your-apps-to-access-the-license-managements-apis-from/ba-p/2464366">Migrate your apps to access the license managements APIs from Microsoft Graph</a> を意訳したものになります。</p><blockquote><p>2021/10/07: Microsoft Graph PowerShell を使用したライセンス管理操作のより詳細な手順につきましては、以下の技術ブログにて紹介しておりますので、こちらもぜひ参照ください。<br><br><a href="https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph/">Microsoft Graph PowerShell を使用したライセンス管理操作の紹介</a></p></blockquote><p>ご不明点等ございましたらサポート チームまで遠慮なくお問い合わせください。</p><h2 id="ライセンス割り当て-API-の廃止"><a href="#ライセンス割り当て-API-の廃止" class="headerlink" title="ライセンス割り当て API の廃止"></a>ライセンス割り当て API の廃止</h2><p><a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/update-your-applications-to-use-microsoft-authentication-library/ba-p/1257363">Azure Active Directory (Azure AD) Graphのサポートが 2022 年 6 月 30 日に終了する</a> ため、Microsoft Graph を使用するようアプリケーションをアップデートするよう <a href="https://jpazureid.github.io/blog/azure-active-directory/have-you-updated-your-applications-to-use-the-microsoft/">6 月にご案内いたしました</a>。これ以降、Azure AD Graph を使用するアプリは、Azure AD Graph エンドポイントからの応答を受け取れなくなります。 </p><p>Azure AD Graph API の廃止に伴い、MSOnline および Azure AD PowerShell モジュールでのライセンス割り当て操作も利用できなくなります。運用への影響を軽減するために、Microsoft Graph エンドポイントのライセンス割り当て API を使用するよう既存のアプリケーションを更新するとともに、Microsoft Graph PowerShell モジュールを使用できるようにスクリプトを更新することをお勧めいたします。MSOnline および Azure AD PowerShell モジュールにおけるその他の操作には影響はありません。</p><p>以下の表は、2022 年 6 月 30 日以降、利用できなくなる操作の一覧です。</p><table>  <thead>    <tr>      <th>既存のコマンド (2022 年 6 月 30 日以降に利用できなくなる操作)</th>      <th>今後推奨される Microsoft Graph PowerShell および API</th>    </tr>  </thead>  <tbody>    <tr>      <td><a href ="https://docs.microsoft.com/ja-jp/powershell/module/msonline/?view=azureadps-1.0" target="_blank">MSOnline Powershell</a>      <br/>・Set-MsolUserLicense      <br/>・New-MsolUser (-LicenseAssignment か -LicenseOptions を指定)</td>      <td rowspan="2">Microsoft Graph PowerShell      <br/>・<a href="https://docs.microsoft.com/ja-jp/powershell/module/microsoft.graph.users.actions/set-mguserlicense?view=graph-powershell-1.0" target="_blank">Set-MgUserLicense</a>      </td>    </tr>    <tr>      <td><a href="https://docs.microsoft.com/en-us/powershell/azure/active-directory/overview?view=azureadps-2.0">Azure AD Powershell</a>      <br/>・Set-AzureADUserLicense      </td>    </tr>    <tr>      <td>Azure AD Graph API (graph.windows.net)      <br/>・assignLicense</td>      <td>Microsoft Graph API      <br/>・<a href="https://docs.microsoft.com/ja-jp/graph/api/user-assignlicense?view=graph-rest-1.0&tabs=http">assignLicense</a></td>    </tr>      </tbody></table><h2 id="次のステップ-新しいライセンス管理プラットフォーム"><a href="#次のステップ-新しいライセンス管理プラットフォーム" class="headerlink" title="次のステップ: 新しいライセンス管理プラットフォーム"></a>次のステップ: 新しいライセンス管理プラットフォーム</h2><p>現在のライセンス管理機能は、グループベースのライセンスなど新機能の登場によりお客様のニーズに対応して成長してきました。しかし、お客様のニーズの変化に伴い、私たちはオンライン サービスのライセンス割り当てプラットフォームを再構成することを決定しました。将来のプラットフォームの変更は以下 4 つの主要な目標を念頭に置き設計されています。</p><ul><li>柔軟性: 単一の管理構造や一つの巨大なユーザー グループ、単一のテナントを超えた拡張性を提供する。</li><li>簡潔性: 不必要な複雑さを減らし、エンド ユーザーへのライセンス割り当てをシンプルにする。</li><li>迅速性: 購入したライセンスに迅速にアクセスできるようにする。</li><li>正確性: 購入したライセンスと割り当て可能なライセンスをわかりやすく表示する。</li></ul><p>このビジョン全体を実現するには時間を要しますが、本日、ビジョンの実現に向けた最初のマイルストーンをご紹介します。2022 年の第 1 四半期から、お客様は新しいライセンス管理プラットフォームの使用を選択できるようになります。このマイルストーンの一環として以下の機能が提供されます。</p><ul><li>ライセンスの分配機能により、ライセンスを小さな単位に分けて使用するライセンス数に制限を設けたり、所有権を委任して管理できるようになります。</li><li>グループベースのライセンス割り当て機能が拡張されます。新しいライセンス割り当てプラットフォームでは、グループ ベースのライセンス割り当てに Azure AD Premium または Office 365 E3 ライセンスは必要なくなります。加えて、ライセンス割り当て対象として入れ子 (ネスト) グループが利用可能となります。</li><li>新しいライセンスの種類として、<a href="https://docs.microsoft.com/ja-jp/deployoffice/device-based-licensing">デバイスベースのライセンス</a> や <a href="https://powerapps.microsoft.com/en-us/blog/partners-introducing-a-new-way-to-manage-and-enforce-licenses-for-your-products/">ISV アプリのライセンス</a> などが新プラットフォームにてネイティブに動作します。</li></ul><p>今後は、新しいライセンス管理プラットフォームの利用方法や、新機能を活用するための新しい API や PowerShell オプションの詳細などをご紹介していく予定です。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 馮 です。&lt;/p&gt;
&lt;p&gt;本日は、2021 年 8 月 26 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcomm</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Graph" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Graph/"/>
    
  </entry>
  
  <entry>
    <title>新しい Azure AD エンタイトルメント管理機能でパートナー (外部ユーザー) との連携をより簡単に</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/onboard-partners-more-easily-with-new-azure-ad-entitlement/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/onboard-partners-more-easily-with-new-azure-ad-entitlement/</id>
    <published>2021-09-12T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.811Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2021 年 9 月 2 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/onboard-partners-more-easily-with-new-azure-ad-entitlement/ba-p/2466924">Onboard partners more easily with new Azure AD entitlement management features</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>先日導入された Azure Active Directory の 2 つのエンタイトルメント管理機能 (<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/onboard-partners-more-easily-with-new-azure-ad-entitlement/ba-p/2466924">カスタム質問</a>と<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-catalog-create#add-resources-to-a-catalog">属性収集</a>) により、パートナー (外部ユーザー) を簡単かつ効率的に業務に参加させることができるようになりました。本日はこの新しい機能についてご紹介するとともに、パートナーの業務参加プロセスにどのように役立つかをお伝えします。これらの追加機能により、Azure AD の ID ガバナンスが強化され、一貫したプロセスと可視性を備えつつセキュリティと生産性を両立するよう支援いたします。</p><p>パートナーの業務参加プロセスでは、アクセス権の付与に加え、使用するアプリやリソースに合わせてアカウントを適切に設定するため、パートナーに関する情報を確認するプロセスが発生します。例えば、パートナーに特定の Teams へのアクセスを許可する際は、実際に許可を行う前に、承認者はパートナーにその Teams への参加が適切かどうかを確認する必要があり、そのためにパートナーの組織内での役割を確認したいと考えると思います。また、パートナーが在庫管理アプリを使用する場合は、従業員と同じように location 属性の設定が必要な場合もあるかもしれません。</p><p>従来は、アカウント設定やアクセス権を付与する前に、情報を収集するためのカスタム フォームを作成していた企業もあるかと思います。フォームの構築には費用がかかる上に、運用するのも大変でした。そこで、以下のエンタイトルメント管理の新機能では、承認者やアプリに対して、パートナーの必要情報を自動的に収集できるようにしました。</p><h2 id="カスタム質問の設定"><a href="#カスタム質問の設定" class="headerlink" title="カスタム質問の設定"></a>カスタム質問の設定</h2><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-access-package-create#add-requestor-information-to-an-access-package">エンタイトルメント管理アクセス パッケージのカスタム質問機能</a> では、申請プロセスにおいて申請者が回答する必要のある質問を設定できます。この機能は既に一般公開されており、回答形式を自由記述や多肢選択式にしたり、異なる場所のパートナーに合わせて質問文をローカライズすることもできます。</p><p><img src="/blog/azure-active-directory/onboard-partners-more-easily-with-new-azure-ad-entitlement/Newaccesspackage.png"></p><p>(Azure Portal &gt; Identity Governance &gt; アクセス パッケージ &gt; 新しいアクセス パッケージ &gt; 要求元情報)</p><p>カスタム質問を設定すると、申請するパートナーは、申請プロセスの一部としてこれらの質問に回答します。この回答を確認したうえで、承認者はパートナーの申請を承認するかどうかを決定することができます。</p><h2 id="既定の属性の指定"><a href="#既定の属性の指定" class="headerlink" title="既定の属性の指定"></a>既定の属性の指定</h2><p>申請時に取得したパートナー情報を保存したい場合、既定の属性もしくはカスタム属性を指定して、申請者のユーザー オブジェクト自体に情報を保存することも可能です。この <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-catalog-create#add-resources-to-a-catalog">属性収集機能</a> は、このほどパブリック プレビューとして公開された機能で、例えば在庫管理アプリがユーザーの location 属性を使用する場合には、アプリが適切に機能するよう location 属性をユーザー オブジェクトに設定することが可能となります。この属性設定は、上記のカスタム質問設定と似ていますが、個々のアクセス パッケージではなく、カタログ内のリソース (この場合は在庫管理アプリ) で使用されます。</p><p><img src="/blog/azure-active-directory/onboard-partners-more-easily-with-new-azure-ad-entitlement/corsoinventory.png"></p><p>(Azure Portal &gt; Identity Governance &gt; カタログ &gt; 該当のカタログを選択 &gt; リソース &gt; 属性が必要)</p><p>アクセス パッケージに、属性収集のために設定されたリソースが含まれている場合、申請したパートナーはアクセス パッケージ自体に指定されたカスタムの質問に加えて、属性収集に設定した値を自動的に尋ねられます。提供された属性情報は承認者にも提示され、申請が承認されると、申請したパートナーのユーザー オブジェクトに書き込まれます。</p><p><img src="/blog/azure-active-directory/onboard-partners-more-easily-with-new-azure-ad-entitlement/requestaccess.png"></p><p>申請者に関して複数の情報提供を要求するシナリオは、パートナーやベンダーなど、リソースへのアクセスを要求する人物が外部ユーザーの場合によく見られますが、この機能はテナント内の従業員にも使用できます。 </p><h2 id="是非機能をお試しください"><a href="#是非機能をお試しください" class="headerlink" title="是非機能をお試しください"></a>是非機能をお試しください</h2><p>すでにエンタイトルメント管理を利用している場合は、既存のアクセス パッケージに質問や必須属性を簡単に追加することができます。初めて利用する場合は、新しいアクセス パッケージを作成および設定することで、この機能を利用することができます。皆様のご意見をお待ちしております。コメントや Twitter でフィードバックをお寄せください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 9 月 2 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>HashiCorp 社の Azure AD プロバイダーが Microsoft Graph に移行しパフォーマンスとユーザー体験が向上</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/hashicorp-s-azure-ad-provider-migrates-to-microsoft-graph/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/hashicorp-s-azure-ad-provider-migrates-to-microsoft-graph/</id>
    <published>2021-09-11T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.699Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの中井です。</p><p>本記事は、2021 年 9 月 1 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/hashicorp-s-azure-ad-provider-migrates-to-microsoft-graph/ba-p/2115720">HashiCorp’s Azure AD Provider Migrates to Microsoft Graph, Improving Performance and User Experience</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>こんにちは。Identity ＆ Access Management プログラム マネジメント担当 パートナー ディレクターの Sue Bohn です。今回の Voice of the ISV ブログ記事では、<strong>HashiCorp 社のシニア エンジニアである Tom Bamford 氏</strong> をお招きし、同社の Terraform Azure AD プロバイダーの新しい Microsoft Graph API への移行についてご紹介します。HashiCorp 社は、<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/update-your-applications-to-use-microsoft-authentication-library/ba-p/1257363">2022 年 6 月 30 日のサポート終了日</a> よりも大幅に前倒しで、Azure AD Graph と Azure Active Directory Authentication Library (ADAL) からの移行を表明しました。トム氏によると、この決断はすでに成果を上げているといいます。</p><h2 id="ソリューション型ソフトウェアの構築"><a href="#ソリューション型ソフトウェアの構築" class="headerlink" title="ソリューション型ソフトウェアの構築"></a>ソリューション型ソフトウェアの構築</h2><p><a href="https://www.hashicorp.com/">HashiCorp</a> は、アプリケーションの開発、配信、保守などのデータセンター管理に革命を起こすことを目的として 2012 年に設立されたオープンソース ソフトウェア企業です。同社のツールは、物理マシンと仮想マシン、Windows、Linux、SaaS、IaaS の両方を管理しており、お客様の要望を満たすソリューションの構築、次世代技術のサポートに尽力しています。本社はサンフランシスコにありますが、約 1,500 人の従業員のうち約 80% はリモートで勤務しています。</p><h2 id="Terraform-の-Azure-AD-との連携"><a href="#Terraform-の-Azure-AD-との連携" class="headerlink" title="Terraform の Azure AD との連携"></a>Terraform の Azure AD との連携</h2><p><a href="https://www.hashicorp.com/products/terraform">HashiCorp Terraform</a> は、インフラの構築、変更、バージョン管理を安全かつ効率的に行うことができる Infrastructure as Code (IaC) ツールです。Terraform を使用することで、アカウンタビリティを維持しながら、企業の構造や目標に合わせて構成の設計、チーム間の委任、セルフサービスでの基盤構築を実現することができます。<a href="https://www.hashicorp.com/blog/terraform-azuread-provider-now-supports-microsoft-graph">Terraform Azure AD プロバイダー</a> は、<a href="https://azure.microsoft.com/en-us/services/active-directory/">Azure Active Directory (Azure AD)</a> のリソースを Terraform で管理できるようにします。私たちの目標は、Azure AD をより親しみやすく、利用しやすくし、お客様に素晴らしいワークフローを提供することです。また、<a href="https://www.hashicorp.com/products/vault">HashiCorp Vault</a> はユーザーに代わって認証プリンシパルを管理し、Azure AD と密接に連携します。</p><p><img src="/blog/azure-active-directory/hashicorp-s-azure-ad-provider-migrates-to-microsoft-graph/Hashicorp.png"></p><h2 id="変化への対応"><a href="#変化への対応" class="headerlink" title="変化への対応"></a>変化への対応</h2><p>オープンソースのソフトウェア企業として、私たちはお客様に最大限の価値を提供するために、製品をオープンに構築しています。私たちは、マイクロソフトが、今後すべての新しい ID 管理機能が、<a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-migration">Microsoft Authentication Library (MSAL)</a> と Microsoft Graph でのみ提供されると発表した 2019 年から、<a href="https://docs.microsoft.com/en-us/graph/overview">Microsoft Graph</a> の開発を注視してきました。私たちは、Azure AD Graph APIとActive Directory Authentication Library (ADAL) の <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/update-your-applications-to-use-microsoft-authentication-library/ba-p/1257363">サポート終了日である 2022 年 6 月 30 日</a> よりも十分に前に、お客様により良いサービスを提供できるよう、早急に新しい API を採用したいと考えていました。Azure AD は常に更新されているため、古い API に頼ることは時間の経過とともに難しくなります。</p><h2 id="Microsoft-Graphへの移行"><a href="#Microsoft-Graphへの移行" class="headerlink" title="Microsoft Graphへの移行"></a>Microsoft Graphへの移行</h2><p>2 年かけて Microsoft Graph へ移行するというスケジュールが私たちにはぴったりでした。マイクロソフトが <a href="https://docs.microsoft.com/en-us/graph/migrate-azure-ad-graph-planning-checklist?view=graph-rest-1.0">ドキュメントとサポート</a> に多大な投資をしてくれたおかげで、移行作業は非常に簡単でした。私たちの最大の関心事は、お客様に対し移行の過程で互換性を保つことでした。現在では、お客様が新しい Microsoft Graph API への移行を選択した場合でも、ディレクトリ内のリソースに望ましくない変更を加えることなく、また設定を更新することなく移行することができます。</p><h2 id="お客様の成功のために"><a href="#お客様の成功のために" class="headerlink" title="お客様の成功のために"></a>お客様の成功のために</h2><p>私たちは <a href="https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/guides/microsoft-graph">包括的な移行ガイド</a> を作成し、Terraform が Graph API を認証するために必要なプリンシパルから、リソースの設定更新まで、お客様の構成の更新を支援しました。このガイドには、既存のリソースやデータ ソースに加えられた変更も含まれています。Microsoft Graph API へのプロバイダの移行は、メジャー バージョンのリリース (v2.0.0) に対応しているため、お客様に変更内容を認識してもらうことができました。また、移行ガイドには、Microsoft Graph のアクセス許可の変更について説明するセクションを設けました。移行作業中のお客様には、新機能のご紹介は控えさせていただきました。また、Azure AD Graph のサポートを終了する一方で、Microsoft Graph には最高クラスのサポートを開始しています。</p><p>さらに、Terraform と Azure AD v2.0.0 プロバイダの使用方法を説明したチュートリアル <a href="https://learn.hashicorp.com/tutorials/terraform/azure-ad">Manage Azure Active Directory Users and Groups Learn</a> を作成しました。本チュートリアルにて、Terraform の設定言語、Terraform Azure AD プロバイダー、およびワークフローの簡素化と自動化のために両者の活用方法を学ぶことができます。</p><h2 id="パフォーマンスとユーザーエクスペリエンスの向上"><a href="#パフォーマンスとユーザーエクスペリエンスの向上" class="headerlink" title="パフォーマンスとユーザーエクスペリエンスの向上"></a>パフォーマンスとユーザーエクスペリエンスの向上</h2><p>Microsoft Graph に移行してからすぐ、パフォーマンスの向上が見られ、より良いユーザー体験を実現しています。従来の API では、リソースに加えられた変更を確認するために、カスタムのポーリング メカニズムを設定する必要がありました。 Microsoft Graph API では、応答時間が大幅に短縮され、データの一貫性が向上することでこれらの課題解決に寄与しています。今後はお客様から寄せられる多くの機能改善要望にお応えできるようになると考えています。</p><p>お客様にとって最も大きなメリットは、Microsoft Graph API の信頼性向上にあります。Azure AD Graphを使用する以前のプロバイダーでは、お客様は特定の操作を行うために、プリンシパルに管理用のディレクトリロールを割り当てる必要がありました。Microsoft Graph では、パーミッションがより細かく管理され、監査やメンテナンスが可能になっています。また、お客様のテナントとその関連製品を自動化するために、より広い範囲でサービスを提供することができるようになっています。</p><h2 id="教訓と今後の展望"><a href="#教訓と今後の展望" class="headerlink" title="教訓と今後の展望"></a>教訓と今後の展望</h2><p>今回のような移行を計画している開発者は、主にアプリケーション周りにおいて、スキーマの違いによってテナントの特定の構成に影響が生じる可能性があることに注意ください。また、移行中も継続的に可用性を維持できることを確認し、追跡が困難な変更を不用意に行ってしまわないようにしてください。綿密な計画を立てれば、スムーズに移行することができるでしょう。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの中井です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 9 月 1 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcommu</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Graph" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Graph/"/>
    
  </entry>
  
  <entry>
    <title>ゲスト ユーザーの棚卸をする方法</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/GuestUser-Inventory/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/GuestUser-Inventory/</id>
    <published>2021-09-09T15:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.539Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure ID チームの小出です。<br>今日は、ゲスト ユーザーの棚卸をする方法について紹介します。</p><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>多くの企業のテナントでは、外部のユーザーと一緒に Teams 会議をしたり、外部のユーザーがプロジェクトで使用するリソースにアクセスしたりできるよう、外部のユーザーをテナントにゲスト ユーザーとして招待していると思います。<br>ゲスト ユーザーは、一般ユーザーでも Azure ポータル上から簡単に招待することができますが、ゲスト ユーザーが増えるにつれて、こんな不安をお持ちのテナント管理者もいらっしゃるのではないでしょうか。  </p><ul><li>不要なゲスト ユーザーの削除をしたいが、誰を削除したらいいかわからない</li><li>一定期間サインインのないゲスト ユーザーを棚卸したいが、最終サインイン日時がわからない</li><li>ゲスト ユーザーが大量にいるため、確認に工数がかかっている。棚卸を自動化したい</li></ul><p>上記のような不安を解消するために、今回は、ゲスト ユーザーを棚卸するための機能として、アクセス レビューとゲスト ユーザーの最終サインイン日時を取得する方法の 2 つを紹介します。<br>なお、アクセス レビューをご利用いただくためには、Azure AD Premium P2 ライセンスが必要となります点を、あらかじめご了承ください。</p><span id="more"></span><h3 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h3><p>A. アクセス レビューを使用して、一定期間サインインのないユーザー アカウントを自動的に棚卸する方法<br>B. ゲスト ユーザーの最終サインイン日時を取得する方法  </p><h2 id="A-アクセス-レビューを使用して、一定期間サインインのないユーザー-アカウントを自動的に棚卸する方法"><a href="#A-アクセス-レビューを使用して、一定期間サインインのないユーザー-アカウントを自動的に棚卸する方法" class="headerlink" title="A. アクセス レビューを使用して、一定期間サインインのないユーザー アカウントを自動的に棚卸する方法"></a>A. アクセス レビューを使用して、一定期間サインインのないユーザー アカウントを自動的に棚卸する方法</h2><p>アクセス レビューは、特定のグループやアプリケーションに割り当てられたユーザーを対象に、<br>グループのメンバーシップやアプリケーションの割り当てに問題がないか（不要なユーザーに割り当てが行われていないか）を定期的に確認できる機能です。</p><p>1 回もしくは定期的に行われるレビューでは、レビューを行う管理者ユーザー（以下、レビュー担当者）が、レビュー内で各ユーザーに対し、[許可] もしくは [拒否] を設定します。<br>詳細は後述していますが、レビュー担当者はレビュー内で対象ユーザー 1 人 1 人の最終サインイン日時 (=最終利用日時) を確認することが可能ですので、そちらをもとに割り当ての「許可」「拒否」を選択します。</p><p>レビューで拒否が選択された場合、たとえばグループから自動的にユーザーを削除したり、アプリケーションから割り当てを自動的に削除したりすることができます。<br>さらには 30 日間アカウントを無効化（サインインをブロック）したのちにユーザーを自動的に削除することも可能です。</p><p>このアクセスレビュー機能を応用してゲスト ユーザーの棚卸を行いますが、実際のところレビューを行う管理者は不特定多数のゲスト ユーザーについて 1 人 1 人アクセスの要否を判断することが困難です。<br>そのため、今回はゲスト ユーザー自身にセルフレビューを依頼し、アクセス権の継続が必要な場合のみ [許可] してもらいます。<br>アクセス権が不要になったゲスト ユーザーは自ら [拒否] を選択することも、レビュー自体を無視することも可能です。(レビューを無視した場合は [拒否] 扱いとすることが可能です。)</p><p>以下の手順にてレビューを作成すると、レビューで拒否が設定されたゲスト ユーザーは自動的に無効化され、 30 日後にテナントから自動的に削除されます。</p><h3 id="手順（アクセス-レビューを作成する"><a href="#手順（アクセス-レビューを作成する" class="headerlink" title="手順（アクセス レビューを作成する"></a>手順（アクセス レビューを作成する</h3><ol><li><p>Azure ポータルにサインインし、 [Azure Active Directory] - [Identity Governance] を開きます。もしくは、ポータル上の検索ボックスより、[Identity Governance] を開きます。<br><img src="/blog/azure-active-directory/GuestUser-Inventory/1_access_IdentityGovernance.png"></p></li><li><p>左ペインにて [アクセス レビュー] をクリックし、 [+ 新しいアクセス レビュー] を選択します。<br><img src="/blog/azure-active-directory/GuestUser-Inventory/2_select_AccessReview.png"></p></li><li><p>レビュー対象を指定します。たとえば、 特定のグループを対象にゲスト ユーザーのレビューを行いたい場合は、以下のように指定します。</p><p> 手順1: [チームとグループ] を選択します。<br> 手順2: [チームとグループの選択] を選択し、ゲスト ユーザーが所属しているグループを選択します。<br> 手順3: [ゲスト ユーザーのみ] を選択します。  </p><p> <img src="/blog/azure-active-directory/GuestUser-Inventory/3_create_review1.png"></p></li></ol><p>手順 2 ではレビュー対象のグループを指定します。<br>ゲスト ユーザーは既存の業務用セキュリティグループ (例 : プロジェクト A グループ) に参加させることが一般的かと思います。<br>この場合、既存の業務用セキュリティグループを手順 2 で選択しつつ、手順 3 では [ゲスト ユーザーのみ] を選択すればレビュー対象をゲスト ユーザーのみに限定することが可能です。</p><div class="alert is-warning"><p class="alert-title">警告</p><p>なお、手順 2 で[ゲスト ユーザーを含むすべての Mcirosoft 365 グループ] を選択すると、後述の手順にて [拒否されたゲスト ユーザーに適用するアクション] が構成できません。そのためこの項目では [チームとグループの選択] を使用します。</p></div><div class="alert is-success"><p class="alert-title">ヒント</p><p>ゲスト ユーザーを既存の業務用セキュリティグループに参加させていない場合は、ゲスト ユーザー全員を含む動的グループを利用する方法もあります。</p><p>具体的には以下のように、 <code>(user.userType -eq &quot;Guest&quot;)</code> のルールで動的グループを作成すると、ゲスト ユーザー全員がメンバーに含まれるグループが作成されますので、本グループを手順 2 で指定します。  </p></div><p>動的グループの作成方法の詳細は、本記事では省略しております。以下の公開情報をご確認ください。<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/groups-create-rule#to-create-a-group-membership-rule">グループ メンバーシップ ルールを作成するには</a></p><p><img src="/blog/azure-active-directory/GuestUser-Inventory/4_DynamicGroup_forGuest.png"></p><ol start="4"><li><p>必要に応じて、レビュー担当者と繰り返しの設定を行います。以下の画面では、半年ごとに、ゲスト ユーザー自身がレビューを行うよう設定しています。</p><p> <img src="/blog/azure-active-directory/GuestUser-Inventory/5_create_review2.png"></p><ul><li>管理者のレビューへの負担を最小限にしたい場合は、本手順のように [レビュー担当者を選択する] にて [ユーザーによる自分のアクセスのレビュー] を選択し、 ゲスト自身がセルフ レビューを行うよう構成します。</li><li>ゲスト自身ではなく、特定のユーザーが一括でレビューを管理したい場合は、 [ユーザーまたはグループが選択済み] を選択してレビュー担当者を個別に指定することも可能です。また、[グループの所有者] を選択して、グループの所有者をレビュー担当者とする構成も実現できます。</li><li>上記の設定は 14 日間有効なレビューが半年ごとに繰り返し実行されます。レビューの依頼をうけたゲスト ユーザーは 14 日間 (2 週間) 以内にレビューに対して応答する必要があります。</li></ul></li><li><p>アクセス レビューの設定を行います。</p><p> <img src="/blog/azure-active-directory/GuestUser-Inventory/6_create_review3.png"></p></li></ol><p>自動的に棚卸を行うために、 [リソースへの結果の自動適用] を [有効] に設定します。<br>また、[レビュー担当者が応答しない場合] の設定を [アクセスの削除] に設定します。<br>（管理者がレビューを行う場合は、 [アクセスの削除] もしくは  [推奨事項の実行] に設定します。）</p><p>レビューで拒否されたゲスト ユーザーをブロックし、30日後にテナントから削除されるようにするためには、<br>[拒否されたゲスト ユーザーに適用するアクション] の項目で、[ユーザーのサインインを 30 日間ブロックした後、テナントからユーザーを削除します] を選択します。</p><p>主な設定項目の説明と、指定する際の判断基準は以下の通りです。</p><table><thead><tr><th>項目</th><th>説明</th></tr></thead><tbody><tr><td>[リソースへの結果の自動適用]</td><td>レビュー完了後、自動で結果を反映させたい場合は [有効] にします。</td></tr><tr><td>[レビュー担当者が応答しない場合]</td><td>レビュー担当者がレビューを行わなかったユーザーに対し、どのような処理を行うか指定します。</td></tr><tr><td>[拒否されたゲスト ユーザーに対するアクション]</td><td>ゲスト ユーザーが拒否された場合の動作を指定します。</td></tr></tbody></table><table><thead><tr><th>[レビュー担当者が応答しない場合] の選択肢</th><th>説明</th></tr></thead><tbody><tr><td>[変更なし]</td><td>レビュー担当者が応答しない場合、特に何も実行されません。</td></tr><tr><td>[アクセスの削除]</td><td>レビュー担当者が [拒否] を設定した時と同様の処理が行われます。実際に行われる処理は、以下の [拒否されたゲスト ユーザーに対するアクション] によって決定されます。</td></tr><tr><td>[アクセスを承認する]</td><td>レビュー担当者が [許可] を設定した時と同様の処理が行われます。そのため、引き続きグループのメンバーシップが維持されます。</td></tr><tr><td>[推奨事項の実行]</td><td>システム上で算出される推奨事項が実行されます。具体的には、 30 日以内にサインインがあれば [許可] 、 30 日以内にサインインがなければ [拒否] が選択される動作となります。    また、 [拒否] が選択されたユーザーに対して行われる処理は、[拒否されたゲスト ユーザーに対するアクション] によって決定されます。</td></tr></tbody></table><table><thead><tr><th>[拒否されたゲスト ユーザーに対するアクション] の選択肢</th><th>説明</th></tr></thead><tbody><tr><td>[リソースからユーザーのメンバーシップを削除]</td><td>レビュー対象のグループから、メンバーが削除されます。またはアプリケーションへのアクセス権が削除されます。ユーザー自体は特に影響を受けないため、テナントには引き続きサインインできます。</td></tr><tr><td>[ユーザーが 30 日間サインインできないようにしてから、テナントからユーザーを削除する]</td><td>他のリソースへのアクセス権を持っているかどうかに関係なく、拒否されたユーザーによるテナントへのサインインがブロックされます。    また、 30 日後にテナントからゲスト ユーザーが削除されます。</td></tr><tr><td></td><td></td></tr></tbody></table><ol start="6"><li>レビュー名と説明を記入し、アクセスレビューを作成します。 <img src="/blog/azure-active-directory/GuestUser-Inventory/7_create_review4.png"></li></ol><h3 id="手順（アクセス-レビューを実施する）-セルフ-レビュー編"><a href="#手順（アクセス-レビューを実施する）-セルフ-レビュー編" class="headerlink" title="手順（アクセス レビューを実施する）-セルフ レビュー編-"></a>手順（アクセス レビューを実施する）-セルフ レビュー編-</h3><ol><li><p>アクセス レビューが開始されると、レビュー対象者の元に <a href="mailto:&#97;&#122;&#117;&#114;&#x65;&#45;&#x6e;&#111;&#x72;&#101;&#112;&#x6c;&#x79;&#x40;&#x6d;&#105;&#x63;&#114;&#x6f;&#x73;&#x6f;&#x66;&#116;&#x2e;&#99;&#x6f;&#x6d;">&#97;&#122;&#117;&#114;&#x65;&#45;&#x6e;&#111;&#x72;&#101;&#112;&#x6c;&#x79;&#x40;&#x6d;&#105;&#x63;&#114;&#x6f;&#x73;&#x6f;&#x66;&#116;&#x2e;&#99;&#x6f;&#x6d;</a> からメールが届くので、[レビューを開始する（Review Access）] をクリックします。<br><img src="/blog/azure-active-directory/GuestUser-Inventory/8_selfReview1.png"></p></li><li><p>以下のような画面が表示されるので、セルフ レビューを実施します。<br><img src="/blog/azure-active-directory/GuestUser-Inventory/9_selfReview2.png"></p></li><li><p>画面が以下のように遷移します。 Progress の項目が 1/1 と表示されていることを確認します。<br><img src="/blog/azure-active-directory/GuestUser-Inventory/10_selfReview3.png"></p></li><li><p>指定した日付が経過するなどしてレビューが完了すると、[自動適用]が有効な場合は、自動的に [拒否されたゲスト ユーザーに対するアクション] が実行されます。</p><p> たとえば、[ユーザーが 30 日間サインインできないようにしてから、テナントからユーザーを削除する] を設定した場合、拒否したユーザーの [サインインのブロック] が [はい] になります。<br> この状態では、まだユーザーは削除されませんが、ユーザーはポータル上にサインインできない状態となります。<br> また、このあと30日経過すると、ゲスト ユーザーはテナントから削除されます。</p></li></ol><h3 id="手順（アクセス-レビューを実施する）-管理者レビュー編"><a href="#手順（アクセス-レビューを実施する）-管理者レビュー編" class="headerlink" title="手順（アクセス レビューを実施する）-管理者レビュー編-"></a>手順（アクセス レビューを実施する）-管理者レビュー編-</h3><p>上記まではゲスト ユーザー自身にレビューを実施してもらう手順となりますが、もしゲスト ユーザー数が少ない場合などは管理者が代表してレビューを行うことも可能です。この場合の手順を後述します。</p><ol><li>アクセス レビューが開始されると、レビュー対象者の元に <a href="mailto:&#x61;&#122;&#117;&#114;&#x65;&#x2d;&#110;&#111;&#114;&#x65;&#112;&#x6c;&#x79;&#x40;&#109;&#105;&#99;&#114;&#x6f;&#x73;&#x6f;&#x66;&#116;&#x2e;&#x63;&#x6f;&#x6d;">&#x61;&#122;&#117;&#114;&#x65;&#x2d;&#110;&#111;&#114;&#x65;&#112;&#x6c;&#x79;&#x40;&#109;&#105;&#99;&#114;&#x6f;&#x73;&#x6f;&#x66;&#116;&#x2e;&#x63;&#x6f;&#x6d;</a> からメールが届くので、[レビューを開始する] をクリックします。<br><img src="/blog/azure-active-directory/GuestUser-Inventory/11_adminreview1.png"></li><li>ユーザーの状況を確認します。各ユーザーを選択すると、 [承認する] と [拒否] がクリックできるようになるので、承認もしくは拒否を指定します。</li><li>[決定] の項目に、レビューを行った際の承認・拒否の値が表示されることを確認します。<br><img src="/blog/azure-active-directory/GuestUser-Inventory/12_adminreview2.png"></li><li>指定した日付が経過するなどしてレビューが完了すると、[自動適用] が有効な場合は、自動的に [拒否されたゲスト ユーザーに対するアクション] が実行されます。</li></ol><p>アクセス レビューに関する以下の公開情報も、併せてご確認ください。  </p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/access-reviews-external-users#disable-and-delete-external-identities-with-azure-ad-access-reviews">Azure AD アクセス レビューを使用して外部 ID の無効化および削除を行う</a>  </li><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/create-access-review">アクセスレビュー作成手順</a></li></ul><h2 id="B-ゲスト-ユーザーの最終サインイン日時を取得する方法"><a href="#B-ゲスト-ユーザーの最終サインイン日時を取得する方法" class="headerlink" title="B. ゲスト ユーザーの最終サインイン日時を取得する方法"></a>B. ゲスト ユーザーの最終サインイン日時を取得する方法</h2><p>アクセス レビューを使用した棚卸についてご案内しましたが、この機能を利用するためには、 Azure AD Premium P2 ライセンスが必要です。<br>そのため、 Azure AD Premium P1 ライセンスまでのみお持ちの環境では、上記の機能を利用することができません。</p><p>棚卸を完全に自動化したい場合は、Azure AD Premium P2 ライセンスの購入を検討する必要がありますが、<br>一定期間サインインのないユーザーを抽出するのみであれば、以下の Github 上に記載のスクリプトを使用することで、ユーザーの最終サインイン日時を取得することが可能です。<br><a href="https://jpazureid.github.io/blog/azure-active-directory/azure-ad-get-lastSignInDateTime/">最終サインイン日時を一括で取得する方法</a></p><p>このスクリプトを利用するためには、アプリケーションの登録などの事前準備が必要です。<br>必要な手順につきましては、下記にて詳細をご案内しておりますので、こちらも併せてご参照ください。<br><a href="https://github.com/jpazureid/get-last-signin-reports/tree/use-signin-activity-beta-api">アプリケーションの登録手順</a></p><p>スクリプトを実行すると CSV ファイルが出力され、以下のように、ユーザーの ID、UPN、最終サインイン日時、アプリケーション情報を順に確認できます。</p><p>実行結果<br><img src="/blog/azure-active-directory/GuestUser-Inventory/13_lastsignin1.png"></p><p>なお、上記にてダウンロードしたスクリプトでは、ゲスト ユーザーのみならず、テナントに登録されているすべてのユーザーの情報が取得されます。<br>そのため、取得対象をゲスト ユーザーのみにしたい場合は、<br>Get-LastSignIn.ps1 のスクリプトの48 行目を、以下のように修正してから実行します。  </p><p>修正箇所<br><img src="/blog/azure-active-directory/GuestUser-Inventory/14_lastsignin2.png"></p><p>修正前</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$users</span> = <span class="built_in">Get-MgUser</span> <span class="literal">-All</span> <span class="literal">-Property</span> id, userPrincipalName, signInActivity</span><br></pre></td></tr></table></figure><p>修正後</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$users</span> = <span class="built_in">Get-MgUser</span> <span class="literal">-All</span> <span class="literal">-Property</span> id, userPrincipalName, signInActivity <span class="literal">-Filter</span> <span class="string">&quot;usertype eq &#x27;Guest&#x27;&quot;</span></span><br></pre></td></tr></table></figure><p>上記手順で 30 日以上サインインしていないゲスト ユーザーを手動で抽出し、必要に応じて、削除処理などを実施いただければと思います。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、 Azure ID チームの小出です。&lt;br&gt;今日は、ゲスト ユーザーの棚卸をする方法について紹介します。&lt;/p&gt;
&lt;h2 id=&quot;はじめに&quot;&gt;&lt;a href=&quot;#はじめに&quot; class=&quot;headerlink&quot; title=&quot;はじめに&quot;&gt;&lt;/a&gt;はじめに&lt;/h2&gt;&lt;p&gt;多くの企業のテナントでは、外部のユーザーと一緒に Teams 会議をしたり、外部のユーザーがプロジェクトで使用するリソースにアクセスしたりできるよう、外部のユーザーをテナントにゲスト ユーザーとして招待していると思います。&lt;br&gt;ゲスト ユーザーは、一般ユーザーでも Azure ポータル上から簡単に招待することができますが、ゲスト ユーザーが増えるにつれて、こんな不安をお持ちのテナント管理者もいらっしゃるのではないでしょうか。  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不要なゲスト ユーザーの削除をしたいが、誰を削除したらいいかわからない&lt;/li&gt;
&lt;li&gt;一定期間サインインのないゲスト ユーザーを棚卸したいが、最終サインイン日時がわからない&lt;/li&gt;
&lt;li&gt;ゲスト ユーザーが大量にいるため、確認に工数がかかっている。棚卸を自動化したい&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;上記のような不安を解消するために、今回は、ゲスト ユーザーを棚卸するための機能として、アクセス レビューとゲスト ユーザーの最終サインイン日時を取得する方法の 2 つを紹介します。&lt;br&gt;なお、アクセス レビューをご利用いただくためには、Azure AD Premium P2 ライセンスが必要となります点を、あらかじめご了承ください。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="B2B" scheme="https://jpazureid.github.io/blog/tags/B2B/"/>
    
    <category term="Access review" scheme="https://jpazureid.github.io/blog/tags/Access-review/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD から Amazon Managed Grafana へのアクセス保護について</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/secure-access-to-amazon-managed-grafana-with-azure-ad/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/secure-access-to-amazon-managed-grafana-with-azure-ad/</id>
    <published>2021-09-05T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.855Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの竜です。</p><p>本記事は、2021 年 9 月 1 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/secure-access-to-amazon-managed-grafana-with-azure-ad/ba-p/2115721">Secure access to Amazon Managed Grafana with Azure AD</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>お客様は、アプリケーションやサービスを特定のクラウドやプラットフォームに限らず、幅広く利用されています。そのため、私たちの ID ソリューションも、プラットフォーム間でシームレスかつ安全に動作し、すべてのクラウドやアプリケーションに対応するようにしています。 お客様がアプリケーションの構築に Azure であろうと AWS であろうと、どのクラウド プロバイダーを使用していても、弊社の目標は、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/secure-app-access?rtc=1">お客様のすべてのアプリケーション、サービス、データのセキュリティを確保すること</a> です。そのため、本日、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/saas-apps/amazon-managed-grafana-tutorial">Azure AD のアプリ ギャラリーにて Amazon Managed Grafana が利用できるようになりました</a> ことを発表いたします。</p><p><a href="https://aws.amazon.com/grafana/">Amazon Managed Grafana</a> を Azure AD のアプリ ギャラリーに統合済みのアプリとして提供することで、シングル サインオンの設定や条件付きアクセス ポリシーの適用を迅速に行い、適切なユーザーが Amazon Managed Grafana にアクセスできるようになります。Grafana は人気の高いオープン ソースの分析プラット フォームです。Grafana をご利用いただくことで、メトリックの保存場所に関わらず、メトリックの検索、アラート、可視化、解析を行うことが可能です。さらに、Amazon Managed Grafana を利用すると、お客様はサーバーのプロビジョニング、ソフトウェアの設定と更新、および本番環境において負担となる Grafana のセキュリティとスケーリングに関わる作業をすることなく、メトリック、ログ、トレースを分析することができます。</p><p><img src="/blog/azure-active-directory/secure-access-to-amazon-managed-grafana-with-azure-ad/BrowseAADGallery.png"></p><p>弊社の Azure AD と Amazon Managed Grafana の統合は、今年初めに発表した <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/saas-apps/aws-single-sign-on-tutorial">AWS SSO 統合</a> を補完するものです。お客様は Azure AD と Amazon Managed Grafana を直接統合いただくこともできますし、AWS SSO 統合を利用してAWS サービス全体で Azure AD のユーザーとグループを一元管理することもできます。</p><p>Amazon Managed Grafana を Azure AD で保護する方法の詳細につきましては、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/saas-apps/amazon-managed-grafana-tutorial">公開資料</a> や <a href="https://aws.amazon.com/grafana/">Amazon Managed Grafana のウェブ ページ</a> にてご確認ください。いつものように、皆様のご意見やご感想をお聞かせください。</p><p>Sue Bohn<br>Partner Director of Program Management<br>Microsoft Identity Division<br>Twitter: <a href="https://twitter.com/Sue_Bohn">@Sue_Bohn</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの竜です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 9 月 1 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcommun</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>2021 年 10 月に予定されるゲスト ユーザー招待時の動作変更について</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/announcement-of-otp/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/announcement-of-otp/</id>
    <published>2021-08-25T15:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.575Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、日本マイクロソフト Azure Identity チームの谷津田です。</p><p>今回はゲストユーザーの招待において、2021 年 10 月以降にサポートされなくなる動作のアナウンスがありましたので、そのアナウンスについてご案内いたします。<br>まず、今回の動作変更の詳細については、以下の公開情報でご確認いただけます。<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/redemption-experience">https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/redemption-experience</a></p><div class="alert is-important"><p class="alert-title">重要</p><p>2021 年 10 月 以降、Microsoft では、B2B コラボレーション シナリオ向けのアンマネージド Azure AD アカウントとテナントを作成することによる招待の利用をサポートしなくなります。 準備として、お客様は、電子メール ワンタイム パスコード認証をオプトインすることをお勧めします。</p></div><p> これはゲスト ユーザー招待時の動作が一部変更になることを示しております。</p><p>本ブログでは、アナウンス内容に関連する以下の内容について上から順にご案内いたしますので、適宜必要な情報をご確認ください。</p><ul><li><a href="#%E5%A4%89%E6%9B%B4%E3%81%AB%E3%82%88%E3%82%8B%E6%97%A2%E5%AD%98%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%B8%E3%81%AE%E5%BD%B1%E9%9F%BF">変更による既存ユーザーへの影響</a></li><li><a href="#%E3%81%8A%E5%8B%A7%E3%82%81%E3%81%A8%E8%A8%98%E8%BC%89%E3%81%AE%E9%9B%BB%E5%AD%90%E3%83%A1%E3%83%BC%E3%83%AB-%E3%83%AF%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0-%E3%83%91%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E8%AA%8D%E8%A8%BC-OTP-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">お勧めと記載の電子メール ワンタイム パスコード認証 (OTP) について</a></li><li><a href="#%E3%82%88%E3%81%8F%E3%81%82%E3%82%8B%E3%81%94%E8%B3%AA%E5%95%8F">よくあるご質問</a></li></ul><h2 id="変更による既存ユーザーへの影響"><a href="#変更による既存ユーザーへの影響" class="headerlink" title="変更による既存ユーザーへの影響"></a>変更による既存ユーザーへの影響</h2><p>今回のアナウンスは既に招待済みのゲストユーザーにおいては影響を与えることはありません。<br>あくまで、新規にゲストユーザーの招待を行う際において、招待するユーザーに紐づくテナントの状態に依存して影響があります。</p><p>影響の詳細について、ゲストユーザーの招待フローをベースにご紹介します。<br>以下が現在のゲストユーザーの招待フローです。</p><p><img src="/blog/azure-active-directory/announcement-of-otp/image01.png"></p><p>今回の影響は、フローの 9 において セルフサービスサインアップアカウントが作成される場合においてユーザーのホーム テナントが存在しない場合、あるいは検証済みのテナントではない場合に生じます。</p><p>フロー 9 について abc.onmicrosoft.com というテナントに <a href="mailto:&#x75;&#x73;&#x65;&#x72;&#49;&#x40;&#99;&#111;&#x6e;&#x74;&#111;&#x73;&#x6f;&#x2e;&#99;&#111;&#x6d;">&#x75;&#x73;&#x65;&#x72;&#49;&#x40;&#99;&#111;&#x6e;&#x74;&#111;&#x73;&#x6f;&#x2e;&#99;&#111;&#x6d;</a> というユーザーを招待しようとしたときを例に説明します。</p><h3 id="パターン-1"><a href="#パターン-1" class="headerlink" title="パターン 1 :"></a>パターン 1 :</h3><ul><li>＜前提条件＞</li></ul><p>Azure AD にカスタム ドメインとして contoso.com というドメイン名を登録したテナントがすでに存在している。<br>contoso.com ドメイン名を登録したテナントには <a href="mailto:&#x75;&#x73;&#101;&#x72;&#49;&#64;&#99;&#111;&#x6e;&#x74;&#x6f;&#x73;&#111;&#46;&#x63;&#111;&#x6d;">&#x75;&#x73;&#101;&#x72;&#49;&#64;&#99;&#111;&#x6e;&#x74;&#x6f;&#x73;&#111;&#46;&#x63;&#111;&#x6d;</a> は存在しない。</p><ul><li>＜動作＞<br>contoso.com が紐づいている Azure AD 上に <a href="mailto:&#x75;&#x73;&#x65;&#114;&#x31;&#64;&#x63;&#111;&#110;&#116;&#111;&#115;&#x6f;&#x2e;&#x63;&#111;&#x6d;">&#x75;&#x73;&#x65;&#114;&#x31;&#64;&#x63;&#111;&#110;&#116;&#111;&#115;&#x6f;&#x2e;&#x63;&#111;&#x6d;</a> が自動で作成されます。この動作は 2021 年 10 月以降も変わりません。</li></ul><h3 id="パターン-2"><a href="#パターン-2" class="headerlink" title="パターン 2 :"></a>パターン 2 :</h3><ul><li><p>＜前提条件＞<br>Azure AD にカスタム ドメインとして contoso.com というドメイン名を登録したテナントが存在していない。<br><a href="mailto:&#x75;&#115;&#x65;&#114;&#x31;&#x40;&#99;&#111;&#110;&#116;&#111;&#115;&#111;&#x2e;&#x63;&#x6f;&#109;">&#x75;&#115;&#x65;&#114;&#x31;&#x40;&#99;&#111;&#110;&#116;&#111;&#115;&#111;&#x2e;&#x63;&#x6f;&#109;</a> は Azure AD のアカウントとして Azure AD のどのテナントにも存在しない。</p></li><li><p>＜動作＞<br>現状は contoso.com が紐づくセルフ サインアップ テナントが自動で作成され、その自動で作成されたテナントに <a href="mailto:&#x75;&#x73;&#x65;&#114;&#49;&#x40;&#x63;&#111;&#110;&#116;&#111;&#115;&#111;&#x2e;&#x63;&#111;&#x6d;">&#x75;&#x73;&#x65;&#114;&#49;&#x40;&#x63;&#111;&#110;&#116;&#111;&#115;&#111;&#x2e;&#x63;&#111;&#x6d;</a> が自動で作成されます。2021 年 10 月以降は、このパターンでの自動テナント作成が行われなくなり、結果的にゲスト ユーザーの招待は失敗する見込みです。</p></li></ul><p>なお、セルフサービス サインアップとは、電子メール ドメインに基づいた ID がどの Azure AD にも存在しない場合に自動でユーザーが作成されることを指します。<br>後述に関連する公開情報もございますので、必要に応じご確認いただけると幸いです。</p><p>公開情報では、”サポートされない” という記載になっておりますが、該当の動作については廃止される可能性はございますので、ゲストユーザー招待に関する運用においては可能な限り、該当の動作を避けるようにワンタイム パスコードなどをご利用くださいますようお願い申し上げます。</p><h2 id="お勧めと記載の電子メール-ワンタイム-パスコード認証-OTP-について"><a href="#お勧めと記載の電子メール-ワンタイム-パスコード認証-OTP-について" class="headerlink" title="お勧めと記載の電子メール ワンタイム パスコード認証 (OTP) について"></a>お勧めと記載の電子メール ワンタイム パスコード認証 (OTP) について</h2><p>アナウンスの後半部分に記載の 電子メール ワンタイム パスコード認証については、Azure AD にアカウントがない、Microsoft アカウントがないなどの状況で、アカウントを作成することなく、招待元 Azure AD (リソーステナント) にアクセスできる機能となります。<br>これまでは、ゲスト招待されたユーザーが Azure AD に所属しないユーザーの場合、上図のフローの通り、フロー 9 で もしくは フロー 10 で パスワードをもつアカウントを作成する必要がありました。<br>電子メール ワンタイム パスコード認証を利用した場合には、リソーステナントにユーザーのソースが OTP として作成されます。</p><p><img src="/blog/azure-active-directory/announcement-of-otp/image02.png"></p><h2 id="よくあるご質問"><a href="#よくあるご質問" class="headerlink" title="よくあるご質問"></a>よくあるご質問</h2><h3 id="Q1-電子メール-ワンタイム-パスコード認証を利用したユーザーが-Azure-Portal-にサインインできない場合にどうしたらよいでしょうか？"><a href="#Q1-電子メール-ワンタイム-パスコード認証を利用したユーザーが-Azure-Portal-にサインインできない場合にどうしたらよいでしょうか？" class="headerlink" title="Q1. 電子メール ワンタイム パスコード認証を利用したユーザーが Azure Portal にサインインできない場合にどうしたらよいでしょうか？"></a>Q1. 電子メール ワンタイム パスコード認証を利用したユーザーが Azure Portal にサインインできない場合にどうしたらよいでしょうか？</h3><p>A1. 電子メール ワンタイム パスコード認証で作成されたゲストユーザーのサインインの動作において、<a href="https://azure.portal.com/">https://azure.portal.com</a> にアクセスできない動作は想定されます。<br>OTP のユーザーについては、招待を行ったテナント (リソーステナント) の情報を URL に含む形式でアクセスする必要があります。<br>そのため、URL として、アクセスしたいテナントを指定する際に、例えば、<a href="https://portal.azure.com/xxx.onmicrosoft.com">https://portal.azure.com/xxx.onmicrosoft.com</a> のような URL を指定することで、ログインすることが可能です。</p><h3 id="Q2-Azure-AD-ポータルの-External-Identities-の-すべてのプロバイダー-の-Email-one-time-passcode-Preview-の設定値で-“2021-年-10-月以降、ゲストのメール-ワンタイム-パスコードが自動的に有効になります。”-になっていますが、有効になった際に既存のゲストユーザーにも影響ありますでしょうか？"><a href="#Q2-Azure-AD-ポータルの-External-Identities-の-すべてのプロバイダー-の-Email-one-time-passcode-Preview-の設定値で-“2021-年-10-月以降、ゲストのメール-ワンタイム-パスコードが自動的に有効になります。”-になっていますが、有効になった際に既存のゲストユーザーにも影響ありますでしょうか？" class="headerlink" title="Q2. Azure AD ポータルの External Identities の [すべてのプロバイダー] の Email one-time passcode (Preview)  の設定値で “2021 年 10 月以降、ゲストのメール ワンタイム パスコードが自動的に有効になります。” になっていますが、有効になった際に既存のゲストユーザーにも影響ありますでしょうか？"></a>Q2. Azure AD ポータルの External Identities の [すべてのプロバイダー] の Email one-time passcode (Preview)  の設定値で “2021 年 10 月以降、ゲストのメール ワンタイム パスコードが自動的に有効になります。” になっていますが、有効になった際に既存のゲストユーザーにも影響ありますでしょうか？</h3><p><img src="/blog/azure-active-directory/announcement-of-otp/image03.png"></p><p>A2. 結論からお伝えしますと、既存のユーザーへの影響はありません。<br>ゲストユーザーの招待におけるフローが変更されるという内容になり、新規でゲストユーザーを招待する際にのみ影響があります。<br>”ゲストのメール ワンタイム パスコードが自動的に有効になる” という設定には、ゲストユーザー招待のフローにおいて、上図のフロー 6 でテナントの設定で自動で YES のフローに流れるというものになります。</p><h3 id="Q3-今回の変更について、新規で作成される-Azure-テナントの-ワンタイムパスワード-パスコードの設定値はどうなりますか？"><a href="#Q3-今回の変更について、新規で作成される-Azure-テナントの-ワンタイムパスワード-パスコードの設定値はどうなりますか？" class="headerlink" title="Q3. 今回の変更について、新規で作成される Azure テナントの ワンタイムパスワード パスコードの設定値はどうなりますか？"></a>Q3. 今回の変更について、新規で作成される Azure テナントの ワンタイムパスワード パスコードの設定値はどうなりますか？</h3><p>A3. 2021 年 10 月以降、電子メール ワンタイム パスコード機能は、新規に作成されるテナントにおいて、既定値として有効になることが期待される動作となります。</p><h3 id="Q4-OTP-を有効し、ゲストユーザーを作成した後に、テナントの設定で-OTP-を無効にしましたが、OTP-で作成したユーザーはどうなりますか？"><a href="#Q4-OTP-を有効し、ゲストユーザーを作成した後に、テナントの設定で-OTP-を無効にしましたが、OTP-で作成したユーザーはどうなりますか？" class="headerlink" title="Q4. OTP を有効し、ゲストユーザーを作成した後に、テナントの設定で OTP を無効にしましたが、OTP で作成したユーザーはどうなりますか？"></a>Q4. OTP を有効し、ゲストユーザーを作成した後に、テナントの設定で OTP を無効にしましたが、OTP で作成したユーザーはどうなりますか？</h3><p>A4. 結論からお伝えいたしますと、OTP として作成されたユーザーは、テナント (リソーステナント) へアクセスすることはできません。<br>そのため、ゲストユーザーの状態引き換え状態をリセットする必要があります。</p><h3 id="Q5-電子メール-ワンタイム-パスコード認証を利用することでセキュリティの強化に繋がりますか？"><a href="#Q5-電子メール-ワンタイム-パスコード認証を利用することでセキュリティの強化に繋がりますか？" class="headerlink" title="Q5. 電子メール ワンタイム パスコード認証を利用することでセキュリティの強化に繋がりますか？"></a>Q5. 電子メール ワンタイム パスコード認証を利用することでセキュリティの強化に繋がりますか？</h3><p>A5. はい、ワンタイムパスワードを利用しない場合と比較し、以下のシナリオでセキュリティ強化に繋がります。<br>まず、ワンタイムパスコードを利用しない場合、ホームテナントに所属するユーザーが会社を退職した際に、ホームテナントに該当のユーザーが残っている場合には、退職者は自身の会社 (ホームテナント) のユーザー名とパスワードを利用し、ホームテナントおよびリソーステナントにアクセスすることが可能です。<br>一方で、ワンタイムパスコードを利用すると、ホームテナントに所属するユーザーが会社を退職した場合、退職者は会社のメールアドレスを利用できなくなるためワンタイムパスコードを受け取ることができず、リソーステナントにアクセスすることはできなくなります。このような状況において、セキュリティの強化に繋がります。<br>後述に関連する公開情報もございますので、必要に応じご確認ください。</p><h3 id="公開情報"><a href="#公開情報" class="headerlink" title="公開情報"></a>公開情報</h3><ul><li><p>[セルフサービス サインアップ]<br>Azure Active Directory のセルフサービス サインアップについて<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/directory-self-service-signup">https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/directory-self-service-signup</a></p></li><li><p>[ゲストユーザーの招待]<br>B2B コラボレーションの招待の利用<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/redemption-experience">https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/redemption-experience</a></p></li><li><p>[よくあるご質問の Q1 関連]<br>B2B ゲスト ユーザーのワンタイム パスコード認証<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/one-time-passcode">https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/one-time-passcode</a></p></li></ul><div class="alert is-info"><p class="alert-title">Note</p><p>ワンタイム パスコードのユーザーは、テナントのコンテキストを含むリンクを使用してサインインする必要があります (たとえば、<code>https://myapps.microsoft.com/?tenantid=&lt;tenant id&gt;</code> や <code>https://portal.azure.com/&lt;tenant id&gt;</code>、または検証済みのドメインの場合は <code>https://myapps.microsoft.com/&lt;verified domain&gt;</code>)。</p></div><ul><li>[よくあるご質問の Q4 関連]<br>電子メール ワンタイム パスコードを無効にする<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/one-time-passcode#disable-email-one-time-passcode">https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/one-time-passcode#disable-email-one-time-passcode</a></li></ul><div class="alert is-info"><p class="alert-title">Note</p><p>お使いのテナントで電子メール ワンタイム パスコード機能が有効になっているときに、それを無効にした場合、ワンタイム パスコードを利用していたゲスト ユーザーは全員サインインできなくなります。 別の認証方法を使用してもう一度サインインできるように、利用状態をリセットすることができます。</p></div><ul><li>[よくあるご質問の Q5 関連]<br>ワンタイム パスコードのゲスト ユーザーに対するユーザー エクスペリエンス<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/one-time-passcode#user-experience-for-one-time-passcode-guest-users">https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/one-time-passcode#user-experience-for-one-time-passcode-guest-users</a></li></ul><div class="alert is-info"><p class="alert-title">Note</p><p>ワンタイム パスコードのゲスト ユーザーに対するユーザー エクスペリエンス</p><p>セッションの有効期限により、ゲスト ユーザーが自分の会社を退職したりアクセスを必要としなくなったときに特に、セキュリティが強化されます。</p></div><p>以上の情報がご参考になれば幸いです。<br>ご不明な点がございましたら弊社サポートまでお気軽にお問い合わせください !</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、日本マイクロソフト Azure Identity チームの谷津田です。&lt;/p&gt;
&lt;p&gt;今回はゲストユーザーの招待において、2021 年 10 月以降にサポートされなくなる動作のアナウンスがありましたので、そのアナウンスについてご案内いたします。&lt;br&gt;まず、今回</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="OTP" scheme="https://jpazureid.github.io/blog/tags/OTP/"/>
    
    <category term="B2B" scheme="https://jpazureid.github.io/blog/tags/B2B/"/>
    
  </entry>
  
  <entry>
    <title>8 月のアップデート - Identity Protection 診断設定のご紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-diagnostic-settings-for-identity-protection-august/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-diagnostic-settings-for-identity-protection-august/</id>
    <published>2021-08-20T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.759Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。本記事は、2021 年 8 月 18 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/introducing-diagnostic-settings-for-identity-protection-august/ba-p/2464365">Introducing diagnostic settings for Identity Protection — August identity updates</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>今回は、管理者や開発者、ユーザーの利便性を向上させる Active Azure Directory の最新情報や新機能をご紹介します。本アップデートは、セキュアな ID とアクセス管理をよりシンプルにし、さらにお客様が必要とするカスタマイズや操作を強化するものになります。</p><p><img src="/blog/azure-active-directory/introducing-diagnostic-settings-for-identity-protection-august/gif_for_demo.gif"></p><h2 id="診断設定を使用して危険なユーザーとリスク検出を追跡する"><a href="#診断設定を使用して危険なユーザーとリスク検出を追跡する" class="headerlink" title="診断設定を使用して危険なユーザーとリスク検出を追跡する"></a>診断設定を使用して危険なユーザーとリスク検出を追跡する</h2><p>Azure AD Identity Protection の診断設定がパブリック プレビューとなったことで、リスク検出や危険なユーザーのアクティビティに関するログを、ストレージ アカウントや Event Hub、Azure Monitor に送信することができます。これにより、セキュリティ リスクの追跡、そして資格情報の漏洩から組織を守ることが容易になります。また、このデータを 30 日間の既定期間を超えて保持することが可能です。診断設定を利用することで、以下のことが実現できます。</p><ul><li>カスタマイズした Azure Monitor ワークブックを作成し、組織内の資格情報漏洩の傾向を追跡する</li><li>特定の脅威に対してリスク データを参照し、リスクのトラブルシュートに利用する</li><li>危険なユーザーとリスク検出データをサード パーティのセキュリティ情報イベント管理 (SIEMs) に送信し、既存のセキュリティ オペレーション センターの手順に該当のデータを組み込む</li></ul><p><a href="https://docs.microsoft.com/ja-jp/azure/azure-monitor/essentials/diagnostic-settings?tabs=CMD">リスク保護のための診断設定</a> について確認し、以下の 2 ステップで設定ください。</p><ul><li><strong>Azure ポータル</strong> にアクセス &gt; <strong>[Azure Active Directory]</strong> &gt; <strong>[診断設定]</strong> &gt; <strong>[設定の編集]</strong> に進みます<br>(設定していない場合は、[診断設定を追加する] から設定を追加します)</li><li>危険なユーザーのデータは <strong>[RiskyUsers]</strong> を、ユーザーのリスク検出データは <strong>[UserRiskEvents]</strong> を選択します<br>(送信先の  [宛先] を選択し、[保存] をクリックします)</li></ul><p><img src="/blog/azure-active-directory/introducing-diagnostic-settings-for-identity-protection-august/AssignRolesToGroups.PNG"></p><h2 id="グループへのロールの割り当てをより簡単に管理する"><a href="#グループへのロールの割り当てをより簡単に管理する" class="headerlink" title="グループへのロールの割り当てをより簡単に管理する"></a>グループへのロールの割り当てをより簡単に管理する</h2><p><img src="/blog/azure-active-directory/introducing-diagnostic-settings-for-identity-protection-august/2.AssignRolesToGroups.png"></p><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/roles/groups-assign-role">Azure AD グループへのロールの割り当て</a> が、より簡単に設定できるようになりました。従来のように個々のユーザーにロールを割り当てる代わりに、[特権ロール管理者] または [グローバル管理者] が、グループに対してロールを割り当てることができます。既に設定しているワーク フローがある場合は、それに沿って承認および監査を行い、適切なユーザーのみがメンバーであることを確認できるようになります。このグループへのロール割り当て機能が一般提供 (GA) となりました。</p><p>また、管理者がグループのオーナーを割り当てることで、[特権ロール管理者] や [グローバル管理者] 以外のメンバーも、グループを管理することができます。グループのオーナーは、グループのメンバーシップを管理し、誰にロールを割り当てるかを管理できます。まずは Azure AD グループでご利用可能ですが、将来的にはオンプレミスのグループにもこの機能が拡張される予定です。</p><h2 id="オーストラリア国内で-B2C-ユーザー-データを保管する"><a href="#オーストラリア国内で-B2C-ユーザー-データを保管する" class="headerlink" title="オーストラリア国内で B2C ユーザー データを保管する"></a>オーストラリア国内で B2C ユーザー データを保管する</h2><p>オーストラリアにおける Azure AD B2C の一般提供 (GA) が開始され、B2C ユーザー データをオーストラリア国内に保存できるようになりました。これによりオーストラリアでホストされているアプリケーションのレイテンシが改善されます。既に B2C テナントをお持ちのお客様は、<a href="https://azure.microsoft.com/en-au/">オーストラリアの Azure ポータル</a> で B2C を検索することで、お試しいただけます。初めてご利用されるお客様は、新しい Azure AD B2C テナントの作成時に、国/地域としてオーストラリアまたはニュージーランドを選択することで、この機能を試すことができます。 </p><h2 id="フィードバックを共有ください"><a href="#フィードバックを共有ください" class="headerlink" title="フィードバックを共有ください"></a>フィードバックを共有ください</h2><p>Azure AD をエンジニアやユーザーの皆様に役立つよう改善したいと考えております。製品の更新はお客様からの要望に基づいたものもよくございます。コメントや <a href="http://twitter.com/azuread">@AzureAD</a> にて皆様のフィードバックや新機能及び今後の改善の提案をおお待ちしております。</p><p>Alex Simons (@Alex_A_Simons)<br>Corporate VP of Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。本記事は、2021 年 8 月 18 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcommunity.</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>アクセス レビューにおける職務の分離チェックによるコンプライアンスの確保</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/ensure-compliance-using-separation-of-duties-checks-in-access-jp/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/ensure-compliance-using-separation-of-duties-checks-in-access-jp/</id>
    <published>2021-07-30T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.691Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの中井です。</p><p>本記事は、2021 年 7 月 26 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/ensure-compliance-using-separation-of-duties-checks-in-access/ba-p/2466939">Ensure compliance using separation of duties checks in access requests</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>Azure Active Directory (Azure AD) の Identity Governance 機能により、一貫したプロセスや透明性を伴ちつつ、従業員の生産性とセキュリティに対する企業のニーズを両立することができます。現在プレビュー中である、Azure AD エンタイトルメント管理の新しい <a href="https://docs.microsoft.com/en-us/azure/active-directory/governance/entitlement-management-access-package-incompatible">職務の分離チェック機能</a> を用いると、ユーザーによる過剰ないしは一貫性のないアクセス権の取得を防ぐことができるようになります。</p><p>今日、弊社のカスタマー ストーリー サイトにて紹介されているような多くの企業では、Azure AD Identity Governance のエンタイトルメント管理とアクセス レビュー機能を活用することで、アクセス期間の制限を設定し、ユーザーがビジネス上重要なアプリケーションへのアクセス権を必要以上に長期間保持しないようにしています。</p><p>エンタイトルメント管理では、グループ、Teams、アプリ ロール、サイト ロールなどのすべてのプロジェクト リソースを単一のアクセス パッケージに束ねることができます。例えば、ユーザーが営業用アプリケーションを使うために営業担当ロールを必要としている場合、そのロールを含むアクセス パッケージをリクエストすることができます。 アクセス レビューが承認されると、ディスカッションのための Teams チャネルや、ドキュメントを保存するための関連する SharePoint Online サイトへのアクセス権が付与さあれます。割り当てが終了すると、そのアクセス権は自動的に削除されます。</p><p><img src="/blog/azure-active-directory/ensure-compliance-using-separation-of-duties-checks-in-access-jp/picture1.png"></p><p>職務の分離チェック機能では、不正使用につながる恐れのある権限の組み合わせをユーザーが受け取らないようにすることで、リスクを減らすことができるため、Azure AD の Identity Governance における最も追加要望の多い機能の一つでした。</p><h2 id="職務の分離チェック機能の動作"><a href="#職務の分離チェック機能の動作" class="headerlink" title="職務の分離チェック機能の動作"></a>職務の分離チェック機能の動作</h2><p>営業用アプリケーションに加えて、会計用アプリケーションがあるとします。社内の監査担当者は、誰も営業用アプリケーションと会計用アプリケーションの両方のデータを変更できないようにするべきだと考えています。そのために、すべての承認プロセスにおいて、会計データへのアクセスを要求するユーザーがすでに営業データへのアクセス権を持っているかかどうか、またその逆はないかどうか確認を行いたいと考えています。</p><p>職務の分離（プレビュー）チェック機能では、ユーザーがすでに別のアクセス パッケージに割り当てられていたり、他のグループのメンバーであったりする場合に、そのユーザーがアクセス パッケージを要求できないよう制限することができます。営業と会計のアクセス パッケージを同時に使用できないよう Azure ポータルまたは <a href="https://docs.microsoft.com/ja-jp/graph/api/resources/accesspackage?view=graph-rest-beta">Graph API</a> いずれかの方法にて設定することで、承認者 (管理者) はユーザーがどのような割り当てを保持しているか手動で確認する必要がなくなるため、アプリケーションの管理プロセスを簡略化することができます。</p><p><img src="/blog/azure-active-directory/ensure-compliance-using-separation-of-duties-checks-in-access-jp/picture2.png"></p><h2 id="2-ステップで職務の分離チェックを設定する"><a href="#2-ステップで職務の分離チェックを設定する" class="headerlink" title="2 ステップで職務の分離チェックを設定する"></a>2 ステップで職務の分離チェックを設定する</h2><p>例えば会計スペシャリストというアクセス パッケージを割り当てられた人が、MyAccess のページにアクセスして営業担当のアクセス パッケージを要求すると、それらのアクセス権を同時に取得できないことが通知されます。通知を受けたユーザーは、現在の要求を取りやめるか、異なるロールで別のアクセス パッケージを要求することができます。</p><p>設定に必要なステップはたった２つです。</p><ul><li>アプリケーションを、グループとチーム、または Share Pointサイトとともに、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-access-package-first">エンタイトルメント管理カタログ</a> に追加し、アクセス パッケージを設定します。 Azure を使用している場合は、Azure ロールに割り当てられたセキュリティ グループを追加することもできます。</li><li>これらのアクセス パッケージに対し、<a href="https://docs.microsoft.com/en-us/azure/active-directory/governance/entitlement-management-access-package-incompatible">職務の分離 (プレビュー)</a> を設定します。その後、Azure AD の監査ログ、あるいは、Azure Monitor における<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-logs-and-reporting">アクセス パッケージのアクティビティやアプリケーション ロールの割り当てについての Workbook</a> を利用することで、ユーザーがどのようにアクセスしたかをレポートとして取得することができます。</li></ul><p>本プレビュー機能をご利用いただき間もない場合であっても、エンタイトルメント管理や他の Azure AD Identity Governance 機能を既にご利用いただいておりましたら、皆様よりフィードバックをお待ちしております。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの中井です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 7 月 26 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcomm</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Access review" scheme="https://jpazureid.github.io/blog/tags/Access-review/"/>
    
  </entry>
  
  <entry>
    <title>外部 ID ユーザー フローをより簡単に設定</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/do-more-with-external-identities-user-flows-in-just-a-few-clicks/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/do-more-with-external-identities-user-flows-in-just-a-few-clicks/</id>
    <published>2021-07-25T00:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.687Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。本記事は、2021 年 7 月 19 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/do-more-with-external-identities-user-flows-in-just-a-few-clicks/ba-p/2147076">Do more with External Identities user flows in just a few clicks</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>弊社では皆様のフィードバックにお応えして、お客様やパートナーに向けたアプリケーションの ID を、より柔軟に、より早く設定できるよう改善しております。現在、マイクロソフトは Azure Active Directory のセルフサービス サインアップと次世代の B2C ユーザー フローを改善し、様々な ID を持つユーザーがより簡単にサインイン、サインアップ、コラボレーションできるように取り組んでいます。さらに、B2C アプリの開発者や管理者においては、ユーザー セッションやパスワード リセット設定を簡単に構成できるようになり、さらには外部のデータやサービスに接続することでユーザー体験を拡張することも容易となっています。</p><h2 id="Microsoft-アカウントと-E-メール-ワンタイム-パスコードによるセルフサービス-サインアップ"><a href="#Microsoft-アカウントと-E-メール-ワンタイム-パスコードによるセルフサービス-サインアップ" class="headerlink" title="Microsoft アカウントと E メール ワンタイム パスコードによるセルフサービス サインアップ"></a>Microsoft アカウントと E メール ワンタイム パスコードによるセルフサービス サインアップ</h2><p>Ignite (Microsoft が主催するグローバル カンファレンス) 以降、Azure AD のセルフサービス サインアップ機能を利用して、外部ユーザーが自身の ID を使用 (bring your own identity) するための 2 つの方法が追加されました。個人や中小企業において、Windows、Xbox、Skype、その他の Microsoft 365 アプリケーションにサインインするために個人の Microsoft アカウントを使用しているユーザーは、その既存のアカウントを使用して、事前に設定されたアプリケーションにサインアップできるようになりました。</p><p><img src="/blog/azure-active-directory/do-more-with-external-identities-user-flows-in-just-a-few-clicks/msaandeotpimage.PNG"></p><p>Microsoft アカウントをお持ちでないお客様は、ワンタイム パスコード (OTP) を E メール アドレスへ送信することができます。</p><p><img src="/blog/azure-active-directory/do-more-with-external-identities-user-flows-in-just-a-few-clicks/RequestOTPSignIn.png"></p><p>Azure ポータルの [すべての ID プロバイダー] ページから、[メールのワンタイム パスコード] と [Microsoft  アカウント] を有効に設定します。また、セルフ サービス サインアップのユーザー フローにおいても、上記の ID プロバイダーを有効に設定ください。</p><p><img src="/blog/azure-active-directory/do-more-with-external-identities-user-flows-in-just-a-few-clicks/IDProvider.png"></p><p>設定の詳細は、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/microsoft-account">Microsoft アカウント (MSA) ID プロバイダー</a> と <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/one-time-passcode">E メールのワンタイム パスコード</a> をご覧ください。</p><h2 id="B2C-アプリ向けパスワード-リセットと-サインインしたままにする-を設定するためのビルトイン-ユーザー-フロー"><a href="#B2C-アプリ向けパスワード-リセットと-サインインしたままにする-を設定するためのビルトイン-ユーザー-フロー" class="headerlink" title="B2C アプリ向けパスワード リセットと [サインインしたままにする] を設定するためのビルトイン ユーザー フロー"></a>B2C アプリ向けパスワード リセットと [サインインしたままにする] を設定するためのビルトイン ユーザー フロー</h2><p>B2C 向けのビルトイン ユーザー フローにより、アプリ開発者は新しいアプリケーション コードを大量に追加する必要なく、ユーザーのサインアップ、サインイン、パスワードのリセットを設定できます。ビルトイン ユーザー フローは新たに追加された設定項目により、一層使いやすくなりました。アプリ開発者は数回のクリックだけで、[サインインしたままにする] や、より柔軟なパスワード リセットの設定を行うことができるようになりました。</p><p> [サインインしたままにする] を有効にすると、永続的なクッキーを使用することで、ユーザーのセッションを長く維持することができます。これにより、ユーザーがブラウザを閉じたり開いたりしても、セッションが有効のまま維持されます。ユーザーが明示的にサインアウトするとセッションは無効になります。また、パスワード リセットを有効にすると、ユーザーがパスワードを忘れたときや、サインイン時に期限切れパスワードのリセットを求められたときに、ユーザー自身がパスワードをリセットすることができます。</p><p><img src="/blog/azure-active-directory/do-more-with-external-identities-user-flows-in-just-a-few-clicks/KMSI_PRfinalimage(3).jpg"></p><h2 id="Azure-AD-B2C-向けの-API-コネクタ"><a href="#Azure-AD-B2C-向けの-API-コネクタ" class="headerlink" title="Azure AD B2C 向けの API コネクタ"></a>Azure AD B2C 向けの API コネクタ</h2><p>数ヶ月前のブログですが、API コネクターを利用した Azure AD アプリケーションのサインアップ フローをカスタマイズする方法について、<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/simple-and-secure-customization-with-b2c-user-flows/ba-p/1751709">いくつかの例</a> をご紹介しました。 外部システムと接続することでサインアップ ユーザー フローを拡張できるこの機能は GA となっています。</p><p>また、レガシーな ID システムやカスタム データ ストア、その他のクラウド サービスから提供される属性を用いてサインインやサインアップのユーザー フロー用トークンを拡張することで、ユーザー フローの拡張性を高め、API コネクターをより強力にすることにも取り組んでいます。この機能は、今後数週間以内に Azure AD B2C のプレビューとして公開される予定です。</p><p>皆様のご意見をお待ちしております。Azure フォーラムや Twitter で <a href="http://twitter.com/azuread">@AzureAD</a> をメンションして、新機能に関するフィードバックをお寄せください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。本記事は、2021 年 7 月 19 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcommunity.</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>ID とエンドポイント管理から始まる強固なゼロトラスト基盤の構築</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/build-a-strong-zero-trust-foundation-starting-with-identity-and-endpoint-management/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/build-a-strong-zero-trust-foundation-starting-with-identity-and-endpoint-management/</id>
    <published>2021-07-18T01:00:00.000Z</published>
    <updated>2021-10-30T20:56:57.639Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 竜 です。本記事は、2021 年 7 月 14 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/build-a-strong-zero-trust-foundation-starting-with-identity-and/ba-p/2520420">Build a strong Zero Trust Foundation starting with identity and endpoint management</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>昨年の Microsoft Inspire では、お客様がリモートワークへ迅速に移行できるよう支援いただいたパートナー企業に感謝の意を表しました。世界が変化し続け、新しい現実が定着する中、今年は 2 つのトレンドがお客様の優先事項に影響を与えてきています。それは、ハイブリッド ワークへの移行とサイバー空間における脅威の高度化です。これらの変化に適応するために、お客様は引き続き弊社のパートナー エコシステムを活用しようとしてくださっています。お客様が変化に適応できる方法の一つとして、弊社のパートナー企業はお客様がゼロ トラスト セキュリティ戦略を採用することを支援しています。</p><p>ゼロ トラストへの移行を始めるのは大変なことかもしれませんが、何もしないという選択肢はもはやありません。私たちはパートナー企業とともに、すべてのお客様にこの道のりを案内する責任があると考えています。どこから始めればよいかの指針を求めている企業には、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/azure-ad-pricing">ID</a>と<a href="https://www.microsoft.com/ja-jp/security/business/microsoft-endpoint-manager">エンドポイント</a>を保護することで強固な基盤を構築することをお勧めしています。今週の <a href="https://myinspire.microsoft.com/home">Microsoft Inspire</a> では、このような基盤を構築するための主要な戦略を紹介しています。</p><p><img src="/blog/azure-active-directory/build-a-strong-zero-trust-foundation-starting-with-identity-and-endpoint-management/01.png"></p><h2 id="ID-とエンドポイント管理の刷新"><a href="#ID-とエンドポイント管理の刷新" class="headerlink" title="ID とエンドポイント管理の刷新"></a>ID とエンドポイント管理の刷新</h2><p>高度なセキュリティと包括的なゼロ トラスト戦略を実現するために、まずアイデンティティとエンドポイント管理のソリューションを刷新することで、クラウドへの移行をさらに迅速に進めることをお勧めします。ビジネス リーダーの間でもこの必要性はさらに高まっている状況です。</p><p>IT システムの刷新は、一見すると非常に大変な作業のように見えます。しかし、まずそのきっかけとして着目すべきは、重要なアクセス可否の判断をクラウドで管理し、一般的な攻撃経路を排除することです。レガシーなフェデレーション方式をやめ、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/choose-ad-authn">認証方式を刷新する</a>ことで、ビジネスに最適なアクセス パスを選択することができます。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-staged-rollout">段階的なロールアウト</a>を用いれば特定のグループからテスト的に展開を行うことができ、移行がよりスムーズになります。また、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/block-legacy-authentication">レガシー認証をブロックする</a>ことによって、多要素認証を確実に施行できるようになり、条件付きアクセスによって多要素認証を既定のポリシーとして設定できます。さらに、アクセス管理を一元化するために、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/cloud-sync/what-is-cloud-sync">Azure AD クラウド同期</a>などのツールを利用してオンプレミスのすべての ID をクラウドに同期することができます。Azure AD クラウド同期は、数百の Active Directory フォレストがあるような複雑な環境にもご利用いただけます。</p><p><img src="/blog/azure-active-directory/build-a-strong-zero-trust-foundation-starting-with-identity-and-endpoint-management/02.png"></p><p>エンドポイント管理を刷新するために、 お客様の要望に合ったペースでクラウドの計画を立てられる <a href="https://www.microsoft.com/ja-jp/security/business/microsoft-endpoint-manager">Microsoft エンドポイント マネージャー</a>の利用をお勧めしています。Microsoft エンドポイント マネージャーは、Configuration Manager と Microsoft Intune を 1 つのエンドポイント管理プラットフォームに統合したものです。それぞれのツールを個別で使用することも、共同で管理することもできます。</p><p>最後に、ID とエンドポイント管理を刷新するために、1 つのクラウド ID とクラウド エンドポイント管理のソリューションを用いてアプリ管理を統一することも検討ください。<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/secure-app-access">すべてのアプリを 1 つの ID システムに接続する</a>ことで、使用されているアプリが可視化され管理も容易になります。また、1 つの認証情報を用いて接続することで、リソースへのアクセスが簡素化されます。マイクロソフトのソリューションは、クラウド アプリからオンプレミス アプリ、デスクトップ アプリやモバイル アプリまで幅広く対応しています。</p><h2 id="ハイブリッド環境で働く従業員の保護"><a href="#ハイブリッド環境で働く従業員の保護" class="headerlink" title="ハイブリッド環境で働く従業員の保護"></a>ハイブリッド環境で働く従業員の保護</h2><p>すべての従業員がハイブリッドな環境で働く場合、ID とエンドポイントの保護がさらに重要になります。ハイブリッド環境の従業員のセキュリティを確保するために最初のステップは、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/mfa-multi-factor-authentication">強力な認証</a>でユーザーの ID を確認することです。パスワードは、一連のセキュリティの中で最も脆弱な部分です。セキュリティを守るために何か 1 つできるとすれば、99.9% の ID 攻撃を防ぐことができる多要素認証から始めることをお勧めします。私たちは、さらに強力な認証のために、より安全で便利な<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/passwordless-authentication">パスワードレス</a> の世界に進もうとしています。</p><p>次に、脆弱なデバイスや侵害されたデバイスからリソースへのアクセスを不可とするポリシーを適用することで、準拠した信頼できるデバイスからのみアクセスできるように制限します。まずエンドポイントをデバイス管理に登録し、デバイスにデータ保護ポリシーを適用します。そして <a href="https://www.microsoft.com/ja-jp/security/business/threat-protection/endpoint-defender">Microsoft Defender for Endpoint</a> のような脅威保護ソリューションを使用して危険なデバイスを検出することで、エンドポイントを保護することができます。</p><p>ID とデバイスを制御できるようになったら、利用の流れとリスク評価に基づいて適応性のあるアクセス ポリシーを設定します。<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/conditional-access-azure-ad">条件付きアクセス</a>では、ユーザー、デバイス、場所、セッションのリスク評価に基づいてアクセス ポリシーを細かく設定することができます。私たちは継続的に条件付きアクセスを改善しており、さらにきめ細やかなアクセス ポリシーも可能にしています。たとえば、認証コンテキストに基づいてポリシーを構築したり、アクセス条件が満たされているかどうかを常に再評価し、変化が検出された場合はセッションを中断することができる継続的なアクセス評価などを利用したりすることが可能です。</p><p>リソースへのアクセスの可否を決定するもう一つの重要な要素に、ユーザーの権限があります。ユーザーの権限は、お客様が従業員やパートナー企業に割り当てる役割、プロジェクト、その他の属性に基づいて設定されます。これらの権限を付与するのは簡単ですが、追跡したり、不要になったときにアクセスを取り消したりするのは非常に困難です。従業員の増加に伴い、全員のアクセス権を管理する単一のソリューションがますます重要になっています。重要なリソースへのアクセスを保護、監視、監査をするために、Azure AD に組み込まれた <a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/identity-governance">Identity Governance</a> のご利用をお勧めします。</p><p><img src="/blog/azure-active-directory/build-a-strong-zero-trust-foundation-starting-with-identity-and-endpoint-management/03.png"></p><h2 id="従業員の体験を変える"><a href="#従業員の体験を変える" class="headerlink" title="従業員の体験を変える"></a>従業員の体験を変える</h2><p>リモート ワークにより従来の方法で IT ヘルプデスクに頼ることがさらに難しくなってきていることもあり、ビジネス リーダーにとって、従業員の満足度を高めることが重要な課題となっています。たとえば、米国内だけでも、4,900 万人のリモート ワーカーが、IT の問題を解決するのに何日も、時には何週間もかかると報告しています (脚注 1)。</p><p>優れた従業員体験をつくるプロセスは、新入社員の入社時から始まります。<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/lifecycle-management-software">Azure AD のプロビジョニング</a>、Microsoft エンドポイント マネージャー、および <a href="https://www.microsoft.com/ja-jp/microsoft-365/windows/windows-autopilot">Windows Autopilot</a> を使用することで、このプロセスを数日から数時間、あるいは数分に短縮し、初日から適切なアプリケーションとデバイスへのアクセスを付与することができます。<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/verifiable-credentials">Azure AD の検証可能資格情報</a>を使用すると、このプロセスをさらに簡素化できます。たとえば、新入社員の個人データを収集して保存することなく、学歴や専門資格などの情報を数分で確認できます。</p><p>入社時から<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/single-sign-on">シングル サインオン</a>を使うことにより、従業員が必要なアプリにスムーズにアクセスできるようになります。従業員の生産性を向上させる最も簡単な方法の 1 つは すべてのアプリケーションを Azure AD に接続することです。Workday、ServiceNow、さらには AWS などの<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/integrated-apps-azure-ad">クラウド アプリケーション</a>から、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/application-management-services">オンプレミスのアプリケーション</a>やカスタム ビルドのアプリケーションまで、すべてのアプリケーションを Azure AD に接続することができます。アプリケーションを Azure AD に接続することで、エンド ユーザーは、一元化されたアプリケーション起動ポータルである <a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/user-self-service-portals">My Apps</a> から、すべてのアプリケーションを容易に見つけて起動することができます。</p><p><img src="/blog/azure-active-directory/build-a-strong-zero-trust-foundation-starting-with-identity-and-endpoint-management/04.png"></p><h2 id="ユーザーに合わせた安全なアクセスのカスタマイズ"><a href="#ユーザーに合わせた安全なアクセスのカスタマイズ" class="headerlink" title="ユーザーに合わせた安全なアクセスのカスタマイズ"></a>ユーザーに合わせた安全なアクセスのカスタマイズ</h2><p>私たちは、すべてのユーザーに安全なアクセスと快適な体験を提供したいと思っています。たとえば、現場の第一線で働く人々 (フロントライン ワーカー) を例に挙げてみましょう。昨年、私たちは、彼らが社会で果たす重要な役割を目の当たりにしましたが、75％ の人はまだ職務を遂行するための適切なツールを持っていない状況があります (脚注 2)。私たちはパートナー企業やお客様と協力して、彼らの仕事環境に適した体験を提供することで、この状況を変えようとしています。まずは、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/howto-authentication-sms-signin">ワンタイム SMS コード</a>を使ってサインイン プロセスがスムーズに行われるようにし、現場の方々が自ら資格情報を管理できるようにすることから始めています。そのために、たとえば <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/roles/my-staff-configure">マイ スタッフ ポータル</a> から電話番号の追加やパスワード リセットの承認などを可能にしました。また、第一線で働く人々が使うツールとしてキオスクが一般的になっています。そのため、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/msal-shared-devices">共有デバイス モード</a>を利用することで、キオスクのようなデバイス上ですべてのアプリやブラウザー セッションに安全にサインインおよびサインアウトすることを可能にしています。</p><p>お客様にとって、もう一つの重要な優先事項は、顧客との長期的な関係を築くことです。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory-b2c/overview">Azure AD B2C</a> を利用することで、企業や開発者は顧客向けアプリケーションのサインイン体験をカスタマイズし、きめ細かなアクセス ポリシーを構築することができます。さらに、<a href="https://cloudblogs.microsoft.com/dynamics365/bdm/2021/05/12/fraud-trends-part-4-balancing-identity-authentication-with-user-experience/">Azure AD B2C を Dynamics Fraud Protection と統合する</a>ことで、不正利用や詐欺から顧客アカウントや収益を保護します。この統合により、偽のアカウントの作成、アカウントの乗っ取り、不正なアカウント アクセスを防ぐことができます。また、不正行為による損失や顧客による購入時の手間を最小化しつつ、収益機会を最大化するための知見を活用することで、取引の成功率を向上させることができます。</p><p><img src="/blog/azure-active-directory/build-a-strong-zero-trust-foundation-starting-with-identity-and-endpoint-management/05.png"></p><h2 id="Microsoft-Inspire-にバーチャル-ライブまたはオンデマンド-でご参加ください"><a href="#Microsoft-Inspire-にバーチャル-ライブまたはオンデマンド-でご参加ください" class="headerlink" title="Microsoft Inspire にバーチャル (ライブまたはオンデマンド) でご参加ください"></a>Microsoft Inspire にバーチャル (ライブまたはオンデマンド) でご参加ください</h2><p>仕事のやり方や場所が変化し、セキュリティ上の脅威が増大していることから、新たなセキュリティ アプローチが必要とされています。ID とエンドポイントを基盤としたゼロ トラストこそが、そのアプローチとなりえます。統合されたセキュリティへのアプローチと併せて、Azure AD と Microsoft エンドポイント マネージャーを利用することで、適切な人が適切なレベルのアクセス権を得られるようになり、セキュリティとエンドユーザーの生産性の両方を向上することができます。</p><p>世界のどこにいても、Microsoft Inspire の期間中、我々のセッションに参加いただけることを願っております。<a href="https://twitter.com/azuread/status/1278418103903363074">Twitter</a> や <a href="https://www.linkedin.com/showcase/microsoft-security/">LinkedIn</a> でハッシュタグ #MSInspire をつけて会話に参加ください。</p><ul><li><a href="https://myinspire.microsoft.com/sessions/a5411f0e-7928-41c2-850f-c7dfbed207a3">TS03</a>: Build a foundation of trust and security</li><li><a href="https://myinspire.microsoft.com/sessions/af379ebd-9be9-4985-9443-068f4a584344">BRK122</a>: Identity and endpoint management – a strong foundation for Zero Trust and profitability</li><li><a href="https://myinspire.microsoft.com/sessions/8f6f4cf4-3712-4e74-bd31-9efeb249298c">OD122</a>: Build a business around helping customers drive towards a Zero Trust framework</li><li><a href="https://myinspire.microsoft.com/sessions/b9f77c58-b8c7-4e95-992b-6875efa7da68">ATEBRK122</a>: Ask the Experts: Identity and endpoint management – a strong foundation for Zero Trust and profitability</li></ul><p>上記内容が参考となれば幸いです。</p><p>Irina Nechaeva<br>ID 製品マーケティング担当シニア ディレクター</p><p>脚注:</p><ol><li>1E American Remote Work Survey, July 20, 2020</li><li>Equip Firstline Workers with Better Tools to Drive Engagement, Forrester Opportunity Snapshot: A Customer Study Commissioned by Microsoft, December 2018</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 竜 です。本記事は、2021 年 7 月 14 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcommunity.m</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
</feed>
